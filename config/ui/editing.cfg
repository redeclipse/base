//This is the file containing the editing user interfaces, excluding the edit compass.
//Standard padding is $ui_padsmaller vertically and $ui_padbutton horizontally.

// Variables

//for texture ui
setpersist ui_tex_show_all 1
ui_tex_show_all = 1
ui_tex_search_criteria = ""
ui_tex_current_slot = 0

//for liquids ui
ui_water_settings = 0 //tab selection for the liquids ui

//for entities ui
ui_ent_set = 0 //value to set an entity attribute to
ui_ent_tab = 0 //tab selection for the entity menu
ui_ent_find = ""  //type of entity to search for

//for REEE ui (editref)
ui_editref_tab = 0

ui_editref_abc = "aiclip air allfaces blankgeom blendbrushcolour blendpaintmode cloudheight cloudlayer cloudscrollx cloudscrolly copy copyprefab"
ui_editref_def = "death dropwaypoints editing entattr entfind entfindinsel"
ui_editref_ghi = "getmap gettex grasscolour grassheight grassblend gridpower hurt"
ui_editref_jkl = "ladder lerpangle lerpsubdiv lerpsubdivsize lava"
ui_editref_mno = "maxmerge obitdeath obitfall obithurt obitlava obitwater"
ui_editref_pqrs = "paste replace savemap saveprefab savewaypoints showwaypoints"
ui_editref_tuv = "vcoastscale vcolour voffset vrefract vreset vscale vscroll"
ui_editref_wxyz =  "water waterdeep waterdeepcolour waterdeepfade waterfallrefractcolour waterfog"

//UI menus in this file (in order), formatted as menuname@[linenumber]
// textures@22 materials@251 liquids@307 skybox@1402 altskybox@1532 edit@1661 editsettings@1684 environment@1844 map@2020 obituaries@2159 coopedit@2178 entities@2198
uimenu "textures" "Texture Browser" "" [ // Main textures menu, accessed by [e]-[t] or [f1]
    uihlist 0.03125 [
        uialign 0 -1
        uiclamp 1 1 1 1

        uivlist $ui_padsmall [
            uiclamp 1 1 1 1

            uivlist $ui_padsmall [
                uivslotview $ui_tex_current_slot 0.2 0.2 [uioutline 0xC0C0C0; uiclamp- 1 1 1 1]

                ui_tex_current_slot_filename = (gettexname $ui_tex_current_slot)

                while [!= (strstr $ui_tex_current_slot_filename "/") -1] [ui_tex_current_slot_filename = (substring $ui_tex_current_slot_filename (+ 1 (strstr $ui_tex_current_slot_filename "/")))]

                uitext (format "#%1, %2" $ui_tex_current_slot $ui_tex_current_slot_filename) $ui_text [uitextlimit 1]
                uitext (gettexname $ui_tex_current_slot) $ui_texttiny [uitextlimit 1]
            ]

            uivlist $ui_padsmall [

                ui_tex_vpalette_types = [
                    [   // Pulse colours
                        "No palette"
                        "Dark fire pulse"
                        "Bright fire pulse"
                        "Disco pulse"
                        "Shock pulse"
                        "Bleed pulse"
                        "Buff pulse"
                        "Warn pulse"
                    ] [ // Team colours
                        "Team Neutral"
                        "Team Alpha"
                        "Team Omega"
                        "Team Kappa"
                        "Team Sigma"
                        "Team Neutral - Enforced"
                        "Team Alpha - Enforced"
                        "Team Omega - Enforced"
                        "Team Kappa - Enforced"
                        "Team Sigma - Enforced"
                    ] [ // Weapon colours
                        "Claw"
                        "Pistol"
                        "Sword"
                        "Shotgun"
                        "SMG"
                        "Flamer"
                        "Plasma"
                        "Zapper"
                        "Rifle"
                        "Grenade"
                        "Mine"
                        "Rocket"
                        "Melee"
                        "Claw - Enforced"
                        "Pistol - Enforced"
                        "Sword - Enforced"
                        "Shotgun - Enforced"
                        "SMG - Enforced"
                        "Flamer - Enforced"
                        "Plasma - Enforced"
                        "Zapper - Enforced"
                        "Rifle - Enforced"
                        "Grenade - Enforced"
                        "Mine - Enforced"
                        "Rocket - Enforced"
                        "Melee - Enforced"
                    ]
                ]

                ui_tex_vshaderparam_types = [
                    "envmin"
                    "envscale"
                    "gloss"
                    "glowcolor"
                    "parallaxscale"
                    "pulseglowcolor"
                    "pulseglowspeed"
                    "specscale"
                    "triplanarbias"
                ]
                //These are the v-commands for textures: vscale vrotate voffset vscroll valpha vcolour vrefract vpallete vcoastscale
                // as they are shown off to the left on the texture UI
                uihlist 0 [
                    uitextleft "Scale:" $ui_textsmall
                    uitextright (format "%1x" (getvscale $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]

                uihlist 0 [
                    uitextleft "Offset:" $ui_textsmall
                    uitextright (format "X: %1, Y: %2" @(getvoffset $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]

                uihlist 0 [
                    uitextleft "Scroll:" $ui_textsmall
                    uitextright (format "X: %1, Y: %2" @(getvscroll $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]

                uihlist 0 [
                    uitextleft "Rotation:" $ui_textsmall
                    uitextright (format "%1 (%2)" (at ["0 deg" "90 deg" "180 deg" "270 deg" "90 deg transposed" "270 deg transposed" "0 deg transposed" "180 deg transposed"] (getvrotate $ui_tex_current_slot)) (getvrotate $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]

                uihlist 0 [
                    uitextleft "Alpha:" $ui_textsmall
                    uitextright (format "F: %1, B: %2" @(getvalpha $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]

                uihlist 0 [
                    uitextleft "Colour:" $ui_textsmall
                    uitextright (format "^fr%1^fw - ^fg%2^fw - ^fb%3" @(getvcolour $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]
                uitextright (format "^fr%1^fw - ^fg%2^fw - ^fb%3" (* (*f (at (getvcolour $ui_tex_current_slot) 0) 255) 1) (* (*f (at (getvcolour $ui_tex_current_slot) 1) 255) 1) (* (*f (at (getvcolour $ui_tex_current_slot) 2) 255) 1)) $ui_textsmall [uitextlimit 1]

                uihlist 0 [
                    uitextleft "Refract:" $ui_textsmall
                    uitextright (format "%1%%" (at (getvrefract $ui_tex_current_slot) 0)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]
                uitextright (format "^fr%2^fw - ^fg%3^fw - ^fb%4" @(getvrefract $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]
                uitextright (format "^fr%1^fw - ^fg%2^fw - ^fb%3" (* (*f (at (getvrefract $ui_tex_current_slot) 1) 255) 1) (* (*f (at (getvrefract $ui_tex_current_slot) 2) 255) 1) (* (*f (at (getvrefract $ui_tex_current_slot) 3) 255) 1)) $ui_textsmall [uitextlimit 1]

                uitextleft "Palette:" $ui_textsmall
                uitextright (format "%3 (%1 %2)" @(getvpalette $ui_tex_current_slot) (at (at $ui_tex_vpalette_types (at (getvpalette $ui_tex_current_slot) 0)) (at (getvpalette $ui_tex_current_slot) 1))) $ui_textsmall [uitextlimit 1]

                uihlist 0 [
                    uitextleft "Coast:" $ui_textsmall
                    uitextright (format "%1x" (getvcoastscale $ui_tex_current_slot)) $ui_textsmall [uitextlimit 1]

                    uiclamp 1 1
                ]

                if (!= (getvlayer $ui_tex_current_slot) 0) [ // if the cursor texture is layered (for blendmapping) it will display those informations here (hidden otherwise)
                    uihlist 0 [
                        uitextleft "Layer:" $ui_textsmall

                        ui_tex_current_slot_vlayer_filename = (gettexname (getvlayer $ui_tex_current_slot))
                        while [!= (strstr $ui_tex_current_slot_vlayer_filename "/") -1] [ui_tex_current_slot_vlayer_filename = (substring $ui_tex_current_slot_vlayer_filename (+ 1 (strstr $ui_tex_current_slot_vlayer_filename "/")))]
                        uitextright (format "#%1, %2" (getvlayer $ui_tex_current_slot) $ui_tex_current_slot_vlayer_filename) $ui_textsmall [uitextlimit 1]

                        uiclamp 1 1
                    ]
                ]

                if (!= (getvdetail $ui_tex_current_slot) 0) [// if the cursor texture has vdetail set it will display those informations here (hidden otherwise)
                    uihlist 0 [
                        uitextleft "Detail:" $ui_textsmall

                        ui_tex_current_slot_vdetail_filename = (gettexname (getvdetail $ui_tex_current_slot))
                        while [!= (strstr $ui_tex_current_slot_vdetail_filename "/") -1] [ui_tex_current_slot_vdetail_filename = (substring $ui_tex_current_slot_vdetail_filename (+ 1 (strstr $ui_tex_current_slot_vdetail_filename "/")))]
                        uitextright (format "#%1, %2" (getvdetail $ui_tex_current_slot) $ui_tex_current_slot_vdetail_filename) $ui_textsmall [uitextlimit 1]

                        uiclamp 1 1
                    ]
                ]

                loop i (listlen $ui_tex_vshaderparam_types) [// if the cursor texture has vshaderparam commands set they will be displayed here (hidden otherwise)
                    if (!=s (getvshaderparam $ui_tex_current_slot (at $ui_tex_vshaderparam_types $i)) "") [
                        uihlist 0 [
                            uitextleft (format "%1:" (at $ui_tex_vshaderparam_types $i)) $ui_textsmall
                            uitextright (getvshaderparam $ui_tex_current_slot (at $ui_tex_vshaderparam_types $i)) $ui_textsmall [uitextlimit 1]

                            uiclamp 1 1
                        ]
                    ]
                ]


                uispace 0.115 0.000
                uiclamp 1 1 1 1
            ]
            //option to show modified textures or only unmodified ones (no vcolour vshaderparam vscale etc.)
            uivlist $ui_padsmall [
                uicheckbox "Show variants" $ui_tex_show_all $ui_checksize [ui_tex_show_all = (! $ui_tex_show_all)]
                uiinput ui_tex_search_criteria 20 [] 1 1 "Search textures..." $colourgrey
            ]
        ]

        uihlist $ui_padsmall [
            uiscroll 1.0546875 0.65625 [
                uifill 1.0546875 0.65625 [
                    uigrid 8 0.0078125 0.0078125 [
                        uihover [] [ui_tex_current_slot = (getseltex)]
                        if (= $ui_tex_show_all 1) [
                            looptexmru tex [
                                if (|| (=s $ui_tex_search_criteria "") (!= (strstr (gettexname $tex) $ui_tex_search_criteria) -1)) [
                                    uivslotview $tex 0.125 0.125 [
                                        if (= $tex (getseltex)) [uioutline 0xFF0000; uiclamp- 1 1 1 1] // Outline currently selected texture
                                        uihold [uioutline 0xC0C0C0; uiclamp- 1 1 1 1] [uihover [uioutline 0xFFFFFF; uiclamp- 1 1 1 1; ui_tex_current_slot = $tex]]
                                        uirelease [uiclose "textures"; settex $tex] //this is the part that selects the texture at the cursor
                                    ]
                                ]
                            ]
                        ] [
                            loop slot (numslots) [
                                if (|| (=s $ui_tex_search_criteria "") (!= (strstr (gettexname $slot) $ui_tex_search_criteria) -1)) [
                                    uislotview $slot 0.125 0.125 [
                                        if (= $slot (getseltex)) [uioutline 0xFF0000; uiclamp- 1 1 1 1] // Outline currently selected texture
                                        uihold [uioutline 0xC0C0C0; uiclamp- 1 1 1 1] [uihover [uioutline 0xFFFFFF; uiclamp- 1 1 1 1; ui_tex_current_slot = $slot]]
                                        uirelease [uiclose "textures"; settex (getslottex $slot)] //this is the part that selects the texture at the cursor
                                    ]
                                ]
                            ]
                        ]
                    ]
                    uialign* -1 -1
                ]
            ]
            uivscroll $ui_slidersize 0.65625 3 //scroll bar at the right of the menu
        ]
    ]
]
// This is the "0" menu for selecting a material.
// UI buttons are coded hard to .16 units wide and are set to normal height.
uimenu "materials" "Material Menu" $edittex [
    uivlist $ui_padbutton [
        uihlist $ui_padbutton [
            uichecktextbutton "AI Clip" "textures/keys/kp7.png" 0 .16 $ui_buttonh [
                aiclip
                uiclose "materials"
            ] $colourwhite $ui_default
            uichecktextbutton "Death" "textures/keys/kp8.png" 0 .16 $ui_buttonh [
                death
                uiclose "materials"
            ] $colourwhite $ui_default
            uichecktextbutton "Ladder" "textures/keys/kp9.png" 0 .16 $ui_buttonh [
                ladder
                uiclose "materials"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Lava" "textures/keys/kp4.png" 0 .16 $ui_buttonh [
                lava
                uiclose "materials"
            ] $colourwhite $ui_default
            uichecktextbutton "Clip" "textures/keys/kp5.png" 0 .16 $ui_buttonh [
                clip
                uiclose "materials"
            ] $colourwhite $ui_default
            uichecktextbutton "Noclip" "textures/keys/kp6.png" 0 .16 $ui_buttonh [
                noclip
                uiclose "materials"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Air (none)" "textures/keys/kp1.png" 0 .16 $ui_buttonh [
                air
                uiclose "materials"
            ] $colourwhite $ui_default
            uichecktextbutton "Alpha" "textures/keys/kp2.png" 0 .16 $ui_buttonh [
                alpha
                uiclose "materials"
            ] $colourwhite $ui_default
            uichecktextbutton "Water" "textures/keys/kp3.png" 0 .16 $ui_buttonh [
                water
                uiclose "materials"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Hurt" "" 0 .16 $ui_buttonh [
                hurt
                uiclose "materials"
            ] $colourwhite $ui_default
        ]
    ]
]

//This is the liquid settings UI. The first four tabs correspond to each water variant; the two variants (normal and alt) are side-by-side inside each tab.
//The latter four tabs correspond to each lava variant, arranged in a similar manner.
//Each menu is coded separately; this could probably be replaced by a more efficient method if desired. Addition of variables to this menu requires adding it for all four liquid types.
uimenu "liquids" "Liquid Settings" "textures/icons/editing" [
    hidechanges 1
    uihlist 0 [
        uiclamp 1 1 1 1
        // side tab, in settings menu
        uivtab (+f $ui_slidersize 0.48) 0.4 $ui_tabw $ui_tabh ui_water_settings [
            0 "Water 1"        []
            1 "Water 2"        []
            2 "Water 3"        []
            3 "Water 4"        []
            4 "Lava 1"        []
            5 "Lava 2"        []
            6 "Lava 3"        []
            7 "Lava 4"        []
        ] [
            uiscroll .8 0.4 [
                uialign -1 0
                uifill .3 .4 [
                    uialign 0 -1
                    uipad .01 .023 .01 .01 [//padding to keep the scroll bar from intersecting the sliders and stuff
                        uialign 0 -1
                        uiclamp 1 1
                        uitable 0 $ui_padsmaller [
                            uialign -1 -1
                            uiclamp 1 1
                            case $ui_water_settings 0 [ //Water 1 Menu
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"   //this is the same crappy way the other ones are done; fix
                                ]
                                uitablerow [ //RGB sliders: colour deep deepfade waterfall refract fallrefract
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Colour"
                                        uifill $ui_checksize
                                        uialign 1 0 //all legend text is aligned rightwards for this ui
                                        uirgbsliders watercolour
                                        uirgbsliders watercolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders waterdeepcolour
                                        uirgbsliders waterdeepcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Fade"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders waterdeepfade
                                        uirgbsliders waterdeepfadealt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders waterfallcolour
                                        uirgbsliders waterfallcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders waterrefractcolour
                                        uirgbsliders waterrefractcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders waterfallrefractcolour
                                        uirgbsliders waterfallrefractcolouralt
                                    ]
                                ]
                            uitablerow [ uibar 1 0]
                            uitablerow [ //These are the single-variable sliders: fog brightness refraction fallrefraction spec fallspec
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "waterfog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterfog
                                            ]
                                        ]
                                        uihorzslider "waterfogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterfogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Water Brightness"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "waterdeep" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterdeep
                                            ]
                                        ]
                                        uihorzslider "waterdeepalt" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterdeepalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "waterrefract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterrefract
                                            ]
                                        ]
                                        uihorzslider "waterrefractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterrefractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "waterfallrefract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterfallrefract
                                            ]
                                        ]
                                        uihorzslider "waterfallrefractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterfallrefractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "waterspec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterspec
                                            ]
                                        ]
                                        uihorzslider "waterspecalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterspecalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "waterfallspec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterfallspec
                                            ]
                                        ]
                                        uihorzslider "waterfallspecalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $waterfallspecalt
                                            ]
                                        ]
                                    ]
                                ]
                            ] 1 [ //Water 2 Menu. Identical in structure to the other water menus.
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water2colour
                                        uirgbsliders water2colouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water2deepcolour
                                        uirgbsliders water2deepcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Fade"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water2deepfade
                                        uirgbsliders water2deepfadealt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water2fallcolour
                                        uirgbsliders water2fallcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water2refractcolour
                                        uirgbsliders water2refractcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water2fallrefractcolour
                                        uirgbsliders water2fallrefractcolouralt
                                    ]
                                ]
                            uitablerow [ uibar 1 0]
                            uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water2fog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2fog
                                            ]
                                        ]
                                        uihorzslider "water2fogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2fogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Water Brightness"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water2deep" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2deep
                                            ]
                                        ]
                                        uihorzslider "water2deepalt" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2deepalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water2refract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2refract
                                            ]
                                        ]
                                        uihorzslider "water2refractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2refractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water2fallrefract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2fallrefract
                                            ]
                                        ]
                                        uihorzslider "water2fallrefractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2fallrefractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water2spec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2spec
                                            ]
                                        ]
                                        uihorzslider "water2specalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2specalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water2fallspec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2fallspec
                                            ]
                                        ]
                                        uihorzslider "water2fallspecalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water2fallspecalt
                                            ]
                                        ]
                                    ]
                                ]
                            ] 2 [ //Water 3 Menu. Identical in structure to the other water menus.
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water3colour
                                        uirgbsliders water3colouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water3deepcolour
                                        uirgbsliders water3deepcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Fade"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water3deepfade
                                        uirgbsliders water3deepfadealt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water3fallcolour
                                        uirgbsliders water3fallcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water3refractcolour
                                        uirgbsliders water3refractcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water3fallrefractcolour
                                        uirgbsliders water3fallrefractcolouralt
                                    ]
                                ]
                            uitablerow [ uibar 1 0]
                            uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water3fog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3fog
                                            ]
                                        ]
                                        uihorzslider "water3fogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3fogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Water Brightness"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water3deep" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3deep
                                            ]
                                        ]
                                        uihorzslider "water3deepalt" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3deepalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water3refract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3refract
                                            ]
                                        ]
                                        uihorzslider "water3refractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3refractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water3fallrefract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3fallrefract
                                            ]
                                        ]
                                        uihorzslider "water3fallrefractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3fallrefractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water3spec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3spec
                                            ]
                                        ]
                                        uihorzslider "water3specalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3specalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water3fallspec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3fallspec
                                            ]
                                        ]
                                        uihorzslider "water3fallspecalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water3fallspecalt
                                            ]
                                        ]
                                    ]
                                ]
                            ] 3 [ //Water 4 Menu. Identical in structure to the other water menus.
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water4colour
                                        uirgbsliders water4colouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water4deepcolour
                                        uirgbsliders water4deepcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Fade"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water4deepfade
                                        uirgbsliders water4deepfadealt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water4fallcolour
                                        uirgbsliders water4fallcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water4refractcolour
                                        uirgbsliders water4refractcolouralt
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refract Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders water4fallrefractcolour
                                        uirgbsliders water4fallrefractcolouralt
                                    ]
                                ]
                            uitablerow [ uibar 1 0]
                            uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water4fog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4fog
                                            ]
                                        ]
                                        uihorzslider "water4fogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4fogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Deep Water Brightness"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water4deep" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4deep
                                            ]
                                        ]
                                        uihorzslider "water4deepalt" 0 1000 10 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4deepalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water4refract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4refract
                                            ]
                                        ]
                                        uihorzslider "water4refractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4refractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Refraction"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water4fallrefract" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4fallrefract
                                            ]
                                        ]
                                        uihorzslider "water4fallrefractalt" 0 5 .05 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4fallrefractalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Water Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water4spec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4spec
                                            ]
                                        ]
                                        uihorzslider "water4specalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4specalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Waterfall Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "water4fallspec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4fallspec
                                            ]
                                        ]
                                        uihorzslider "water4fallspecalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $water4fallspecalt
                                            ]
                                        ]
                                    ]
                                ]
                            ] 4 [ //Lava 1 menu. The other lava tabs are identical in form to this tab.
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders lavacolour
                                        uirgbsliders lavacolouralt
                                    ]
                                ]

                            uitablerow [ uibar 1 0]
                            uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lavafog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavafog
                                            ]
                                        ]
                                        uihorzslider "lavafogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavafogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Min"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lavaglowmin" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavaglowmin
                                            ]
                                        ]
                                        uihorzslider "lavaglowminalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavaglowminalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Max"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lavaglowmax" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavaglowmax
                                            ]
                                        ]
                                        uihorzslider "lavaglowmaxalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavaglowmaxalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lavaspec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavaspec
                                            ]
                                        ]
                                        uihorzslider "lavaspecalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lavaspecalt
                                            ]
                                        ]
                                    ]
                                ]
                            ] 5 [ //Lava 2 menu. The other lava tabs are identical in form to this tab.
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders lava2colour
                                        uirgbsliders lava2colouralt
                                    ]
                                ]

                            uitablerow [ uibar 1 0]
                            uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava2fog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2fog
                                            ]
                                        ]
                                        uihorzslider "lava2fogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2fogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Min"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava2glowmin" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2glowmin
                                            ]
                                        ]
                                        uihorzslider "lava2glowminalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2glowminalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Max"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava2glowmax" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2glowmax
                                            ]
                                        ]
                                        uihorzslider "lava2glowmaxalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2glowmaxalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava2spec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2spec
                                            ]
                                        ]
                                        uihorzslider "lava2specalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava2specalt
                                            ]
                                        ]
                                    ]
                                ]
                            ] 6 [ //Lava 3 menu. The other lava tabs are identical in form to this tab.
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders lava3colour
                                        uirgbsliders lava3colouralt
                                    ]
                                ]

                            uitablerow [ uibar 1 0]
                            uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava3fog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3fog
                                            ]
                                        ]
                                        uihorzslider "lava3fogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3fogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Min"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava3glowmin" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3glowmin
                                            ]
                                        ]
                                        uihorzslider "lava3glowminalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3glowminalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Max"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava3glowmax" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3glowmax
                                            ]
                                        ]
                                        uihorzslider "lava3glowmaxalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3glowmaxalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava3spec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3spec
                                            ]
                                        ]
                                        uihorzslider "lava3specalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava3specalt
                                            ]
                                        ]
                                    ]
                                ]
                            ] 7 [ //Lava 4 menu. The other lava tabs are identical in form to this tab.
                                uitablerow [
                                    uitextleft "                                     Normal               Alt"
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Colour"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uirgbsliders lava4colour
                                        uirgbsliders lava4colouralt
                                    ]
                                ]

                            uitablerow [ uibar 1 0]
                            uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Fog"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava4fog" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4fog
                                            ]
                                        ]
                                        uihorzslider "lava4fogalt" 0 600 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4fogalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Min"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava4glowmin" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4glowmin
                                            ]
                                        ]
                                        uihorzslider "lava4glowminalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4glowminalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Glow Max"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava4glowmax" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4glowmax
                                            ]
                                        ]
                                        uihorzslider "lava4glowmaxalt" 0 2 .1 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4glowmaxalt
                                            ]
                                        ]
                                    ]
                                ]
                                uitablerow [
                                    uihlist $ui_padbutton [
                                        uitextleft "Lava Specularity"
                                        uifill $ui_checksize
                                        uialign 1 0
                                        uihorzslider "lava4spec" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4spec
                                            ]
                                        ]
                                        uihorzslider "lava4specalt" 0 200 5 0.16 0.025 [
                                            uivlist 0 [
                                                 uifill 0.050 0
                                                 uitext $lava4specalt
                                            ]
                                        ]
                                    ]
                                ]
                            ]
                        ]
                    ]
                ]
            ]
            uihlist 0 [uivscroll $ui_slidersize 0.4 3; uialign 1 0; uiclamp 0 1]
        ]
    ]
]

//This is the normal skybox menu {forcemapvariant 1}
//All skyboxes here and in uimenu altskybox are hard coded and any new skyboxes need to be added here in order to show up.
//The UI closes after selecting each option. This can be changed by removing the >uiclose "skybox" line from each button.
//This menu and the next one are horridly suboptimal (in terms of lines of code), but they do work properly.
uimenu "skybox" "Choose Skybox" $questiontex [
    uivlist $ui_padsmaller [
        uichecktextbutton "None" "" 0 $ui_buttonw $ui_buttonh [ //leaving the no-skybox option in its own row (rest are 2 entry rows)
            skybox = ""
            uiclose "skybox"
        ] $colourwhite $ui_default
        uihlist $ui_padbutton [ // making each row contain two entries
            uichecktextbutton "Arch3" "elyvisions/arch3_lf" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/arch3"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Cave3" "elyvisions/cave3_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/cave3"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Clouds" "skyboxes/clouds2_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/clouds2"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Dark" "elyvisions/dark_rt" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/dark"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Gradient" "skyboxes/gradient_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/gradient"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Grey" "skyboxes/grey_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/grey"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Hot" "elyvisions/hot_rt" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/hot"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Interstellar" "skyboxes/interstellar_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/interstellar"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Miramar" "skyboxes/miramar_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/miramar"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Rainbow" "elyvisions/rainbow_rt" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/rainbow"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Sh" "elyvisions/sh_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/sh"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Skyast" "elyvisions/skyast_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/skyast"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Skyhigh" "skyboxes/skyhigh_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/skyhigh"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Skyhsky" "elyvisions/skyhsky_rt" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/skyhsky"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Skylump" "skyboxes/skylump_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/skylump"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Skylump2" "skyboxes/skylump2_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/skylump2"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Skype" "elyvisions/skype_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/skype"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Sp2" "elyvisions/sp2_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/sp2"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Sp3" "elyvisions/sp3_rt" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/sp3"
                uiclose "skybox"
            ] $colourwhite $ui_default
                uichecktextbutton "Stars" "skyboxes/stars_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/stars"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Stormydays" "skyboxes/stormydays_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/stormydays"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Sunset" "skyboxes/sunsetflat_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/sunsetflat"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Tron" "elyvisions/tron_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "elyvisions/tron"
                uiclose "skybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Yellow" "skyboxes/yellow_up" 0 $ui_buttonw $ui_buttonh [
                skybox = "skyboxes/yellow"
                uiclose "skybox"
            ] $colourwhite $ui_default
        ]
    ]
]

//This is the alternate skybox menu for {forcemapvariant 2}. It is identical to the ordinary skybox menu except that it changes skyboxalt.
uimenu "altskybox" "Choose Skybox" $questiontex [
    uivlist $ui_padsmaller [
        uichecktextbutton "None" "" 0 $ui_buttonw $ui_buttonh [
            skyboxalt = ""
            uiclose "altskybox"
        ] $colourwhite $ui_default
        uihlist $ui_padbutton [
            uichecktextbutton "Arch3" "elyvisions/arch3_lf" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/arch3"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Cave3" "elyvisions/cave3_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/cave3"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Clouds" "skyboxes/clouds2_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/clouds2"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Dark" "elyvisions/dark_rt" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/dark"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Gradient" "skyboxes/gradient_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/gradient"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Grey" "skyboxes/grey_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/grey"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Hot" "elyvisions/hot_rt" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/hot"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Interstellar" "skyboxes/interstellar_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/interstellar"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Miramar" "skyboxes/miramar_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/miramar"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Rainbow" "elyvisions/rainbow_rt" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/rainbow"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Sh" "elyvisions/sh_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/sh"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Skyast" "elyvisions/skyast_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/skyast"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Skyhigh" "skyboxes/skyhigh_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/skyhigh"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Skyhsky" "elyvisions/skyhsky_rt" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/skyhsky"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Skylump" "skyboxes/skylump_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/skylump"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Skylump2" "skyboxes/skylump2_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/skylump2"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Skype" "elyvisions/skype_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/skype"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Sp2" "elyvisions/sp2_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/sp2"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Sp3" "elyvisions/sp3_rt" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/sp3"
                uiclose "altskybox"
            ] $colourwhite $ui_default
                uichecktextbutton "Stars" "skyboxes/stars_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/stars"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Stormydays" "skyboxes/stormydays_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/stormydays"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Sunset" "skyboxes/sunsetflat_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/sunsetflat"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
        uihlist $ui_padbutton [
            uichecktextbutton "Tron" "elyvisions/tron_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "elyvisions/tron"
                uiclose "altskybox"
            ] $colourwhite $ui_default
            uichecktextbutton "Yellow" "skyboxes/yellow_up" 0 $ui_buttonw $ui_buttonh [
                skyboxalt = "skyboxes/yellow"
                uiclose "altskybox"
            ] $colourwhite $ui_default
        ]
    ]
]
//This is the edit menu as accessed by f3 while in edit mode
uimenu "edit" "Edit Menu" "<grey>textures/icons/editing" [
    uivlist $ui_padsmaller [
        uichecktextbutton "Edit Settings" "" 0 $ui_buttonw $ui_buttonh [
            uiopen "editsettings"
        ] $colourwhite $ui_default
        uichecktextbutton "Environment Settings" "" 0 $ui_buttonw $ui_buttonh [
            uiopen "environment"
        ] $colourwhite $ui_default
        uichecktextbutton "Map Settings" "" 0 $ui_buttonw $ui_buttonh [
            uiopen "map"
        ] $colourwhite $ui_default
        uichecktextbutton "Textures" "" 0 $ui_buttonw $ui_buttonh [
            uiopen "textures"
        ] $colourwhite $ui_default
        uichecktextbutton "Multiplayer Settings" "" 0 $ui_buttonw $ui_buttonh [
            uiopen "coopedit"
        ] $colourwhite $ui_default
        uichecktextbutton "Entity Menu" "" 0 $ui_buttonw $ui_buttonh [
            uiopen "entities"
        ] $colourwhite $ui_default
        uichecktextbutton "The REEE" "" 0 $ui_buttonw $ui_buttonh [
            uiopen "editref"
        ] $colourwhite $ui_default
    ]
]
// This is the menu accessed by [e]-[d] while in edit mode, for editing UI settings
uimenu "editsettings" "Edit Settings" "<grey>textures/icons/editing" [
    uifill 0.38 0.4 //ui size
    uivlist  $ui_padbutton [
        uialign -1 -1
        uiclamp 1 1
        uivlist $ui_padsmaller [
            //cube painting size, in powers of 2; 10 is a standard newmap, so slider is limited to 9. Hotkey for this in edit would be [G] + scroll
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitext "Grid Power"
                uialign -1 0 // text is aligned rightwards, bumped up against the sliders for gridpower and undomegs
                uihorzslider "gridpower" 0 9 1 0.2 0.025 [//all the sliders in the edit menus are .2 ui-units across unless labeled otherwise
                    uivlist 0 [
                        uifill 0.050 0//centering the text inside the slider so things don't look dumb (all sliders are configured like this unless labeled otherwise)
                        uitext $gridpower
                    ]
                ]
                uialign 1 0 //whole hlist is aligned rightwards (most sliders will be aligned this way; most toggles will be aligned leftwards)
            ]
            //undo cache size in megabytes, 1 to 100mb
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitextleft "Undo Cache Size"
                uialign -1 0
                uihorzslider "undomegs" 1 100 1 0.2 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $undomegs
                    ]
                ]
                uialign 1 0
            ]
            //options for edit display & controls -- float speed, float coast, edit FOV
            uibar 1 0
            //float speed while spectating or editing
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitext "Float Speed"
                uialign -1 0
                uihorzslider "floatspeed" 50 1000 10 0.2 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $floatspeed
                    ]
                ]
                uialign 1 0
            ]
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitext "Float Coast"
                uialign -1 0
                uihorzslider "floatcoast" 1 20 1 0.2 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $floatcoast
                    ]
                ]
                uialign 1 0
            ]
            // field of view in edit mode
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitext "Edit Field of View"
                uialign -1 0 // text is aligned rightwards, bumped up against the sliders for gridpower and undomegs
                uihorzslider "editfov" 1 179 1 0.2 0.025 [//all the sliders in the edit menus are .2 ui-units across unless labeled otherwise
                    uivlist 0 [
                        uifill 0.050 0//centering the text inside the slider so things don't look dumb (all sliders are configured like this unless labeled otherwise)
                        uitext $editfov
                    ]
                ]
                uialign 1 0 //whole hlist is aligned rightwards (most sliders will be aligned this way; most toggles will be aligned leftwards)
            ]
            uibar 1 0
            uihlist $ui_padbutton [ // determines which variant is displayed: normal or alt (day or night)
                uifill $ui_checksize
                uitextleft "Map Variant"
                uialign -1 0
                uiselect 0.2 0.025 "forcemapvariant" [
                    0   "Random"             []
                    1   "Normal"             []
                    2   "Alternate"          []
                ] [uialign 1 0]
                uialign 1 0
            ]
            uihlist $ui_padbutton [ // this determines how music plays in edit mode, NOT the map's actual music
                uifill $ui_checksize
                uitextleft "Map Music"
                uialign -1 0
                uiselect 0.2 0.025 "musicedit" [
                    0   "Off"             []
                    3   "By Map"          []//note that option 3 is used here because musicedit 1 seems to shuffle (?)
                    2   "Random/Loop"     []
                    5   "Random/Shuffle"  []
                ] [uialign 1 0]
                uialign 1 0
            ]
            uibar 1 0
            // these are the togglable editing settings: entediting, entselsnap, allfaces, showmat, wireframe, fullbright, outline, crosshairdistance
            uihlist $ui_padbutton [
                uicheckbox "Entity Editing" $entediting $ui_checksize [entediting = (! $entediting)]
                uialign -1 0 // text is aligned leftwards, bumped up against the buttons for the toggleables
            ]
            uihlist $ui_padbutton [
                uicheckbox "Entity Grid Snap" $entselsnap $ui_checksize [entselsnap = (! $entselsnap)]
                uialign -1 0
            ]
            uihlist $ui_padbutton [
                uicheckbox "All Face Texturing" $allfaces $ui_checksize [allfaces = (! $allfaces)]
                uialign -1 0
            ]
            uibar 1 0
            uihlist $ui_padbutton [
                uicheckbox "Move With Selection Push" $selectionsurf $ui_checksize [selectionsurf = (! $selectionsurf)]
                uialign -1 0
            ]
            uihlist $ui_padbutton [
                uicheckbox "Move With Entities" $entitysurf $ui_checksize [entitysurf = (! $entitysurf)]
                uialign -1 0
            ]
            uibar 1 0
            uihlist $ui_padbutton [
                uicheckbox "Show Material Volumes" $showmat $ui_checksize [showmat = (! $showmat)]
                uialign -1 0
            ]
            uihlist $ui_padbutton [
                uicheckbox "Wireframe" $wireframe $ui_checksize [wireframe = (! $wireframe)]
                uialign -1 0
            ]
            uihlist $ui_padbutton [
                uicheckbox "Fullbright" $fullbright $ui_checksize [fullbright = (! $fullbright)]
                uialign -1 0
            ]
            uihlist $ui_padbutton [
                uicheckbox "Blank Geometry" $blankgeom $ui_checksize [blankgeom = (! $blankgeom)]
                uialign -1 0
            ]
            uihlist $ui_padbutton [
                uicheckbox "Geometry Outline" $outline $ui_checksize [outline = (! $outline)]
                uialign -1 0
            ]
            uihlist $ui_padbutton [
                uicheckbox "Hide Occluded Geometry Outline" $dtoutline $ui_checksize [dtoutline = (! $dtoutline)]
                uialign -1 0
            ]
            uibar 1 0
            uispace 0
            uihlist $ui_padbutton [
                uicheckbox "Show Distance on Crosshair" $crosshairdistance $ui_checksize [crosshairdistance = (! $crosshairdistance)]
                uialign -1 0
            ]
            uibar 1 0
            uihlist $ui_padbutton [
                uichecktextbutton "Customize Keybinds" "" 0 $ui_buttonw $ui_buttonzh [
                    uiopen "binds"
                ] $colourwhite $ui_default
            ]
        ]
    ]
]
//Map environment settings, accessed by [e]-[w] in the edit compass menu
uimenu "environment" "Environment Settings" "<grey>textures/icons/editing" [
    uifill 0.38 0.4 //size of ui
    uivlist  $ui_padbutton [
        uialign -1 -1
        uiclamp 1 1
        uivlist $ui_padsmaller [
            //title bar
            uihlist $ui_padbutton [
                uitextleft "Normal                         "
                uialign -1 0
                uitextright " Alt"
                uialign 1 0
            ]
            //fog distance sliders for normal and alt modes
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitextright "Fog Distance " // the extra space is a kludge for alignment (fix)
                uialign -1 0
                uifill $ui_checksize
                uihorzslider "fog" 16 10000 10 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $fog
                    ]
                ]
                uialign 1 0
                uihorzslider "fogalt" 16 10000 10 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $fogalt
                    ]
                ]
                uialign 1 0
            ]
            //fog colour sliders, normal and alt
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitextleft "Fog Colour"
                uialign -1 0
                uifill $ui_checksize
                uirgbsliders fogcolour
                uirgbsliders fogcolouralt
                uialign 1 0
            ]
            uibar 1 0
            //slider multiplier for sunlight, normal and alt
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitextleft "Sunlight Scale"
                uialign -1 0
                uifill $ui_checksize
                uihorzslider "sunlightscale" 0 16 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $sunlightscale
                    ]
                ]
                uialign 1 0
                uihorzslider "sunlightscalealt" 0 16 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $sunlightscalealt
                    ]
                ]
                uialign 1 0
            ]
            // controls the height of the sun in the sky, from 0 (horizon) to 90 (noon), normal and alt sliders
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitextleft "Sunlight Pitch"
                uialign -1 0
                uifill $ui_checksize
                uihorzslider "sunlightpitch" 0 90 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $sunlightpitch
                    ]
                ]
                uialign 1 0
                uihorzslider "sunlightpitchalt" 0 90 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $sunlightpitchalt
                    ]
                ]
                uialign 1 0
            ]
            //controls the direction the sun faces; normal and alt sliders
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitextleft "Sunlight Yaw"
                uialign -1 0
                uifill $ui_checksize
                uihorzslider "sunlightyaw" 0 360 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $sunlightyaw
                    ]
                ]
                uialign 1 0
                uihorzslider "sunlightyawalt" 0 360 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $sunlightyawalt
                    ]
                ]
                uialign 1 0
            ]
            //sunlight colour sliders for normal and alt
            uihlist $ui_padbutton [
                uitextleft "Sunlight Colour"
                uifill $ui_checksize
                uirgbsliders sunlight
                uirgbsliders sunlightalt
                uialign 1 0
            ]
            uibar 1 0
            //ambient colour (total shadow) sliders for normal and alt
            uihlist $ui_padbutton [
                uitextleft "Ambient Colour"
                uifill $ui_checksize
                uirgbsliders ambient
                uirgbsliders ambientalt
                uialign 1 0
            ]
            uibar 1 0
            //skybox colour sliders
            uihlist $ui_padbutton [
                uitextleft "Skybox Colour "
                uifill $ui_checksize
                uirgbsliders skycolour
                uirgbsliders skycolouralt
                uialign 1 0
            ]
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uitextleft "Skybox Yaw"
                uialign -1 0
                uifill $ui_checksize
                uihorzslider "yawsky" 0 360 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $yawsky
                    ]
                ]
                uialign 1 0
                uihorzslider "yawskyalt" 0 360 1 0.16 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $yawskyalt
                    ]
                ]
                uialign 1 0
            ]
            //sends you to the skybox uis so you can pick one
            uihlist $ui_padbutton [
                uialign -1 0
                uichecktextbutton "Normal Skybox..." "" 0 .16 .025 [
                    uiopen "skybox"
                ] $colourwhite $ui_default
                uichecktextbutton "Alt Skybox..." "" 0 .16 .025 [
                    uiopen "altskybox"
                ] $colourwhite $ui_default
                uialign 1 0
            ]
            uihlist $ui_padbutton [
                uialign -1 0
                uichecktextbutton "Liquid Settings" "" 0 .328 .025 [
                    uiopen "liquids"
                ] $colourwhite $ui_default
                uialign 1 0
            ]
        ]
    ]
]
//Map menu, accessed by [e]-[a] in the editing compass menu
uimenu "map" "Map Settings" "<grey>textures/icons/editing" [
    uifill 0.38 0.4 //size of ui
    uivlist  $ui_padbutton [
        uialign -1 -1
        uiclamp 1 1
        uivlist $ui_padsmaller [
            //preview picture
            uihlist $ui_padbutton [
                uivlist $ui_padbutton [
                    if (= 1 (maprevision)) [ //if map is new (on r1) then show icon instead of blanking
                        uihlist 0 [
                            uifill .03 0.01
                            uiimage "textures/icon" $ui_default 0 .18 .18
                            uifill .03 0.01
                        ]
                    ] [
                        uiimage $mapname $ui_default 0 .24 .18
                    ]
                ]
                uivlist $ui_padbutton [
                    //file settings: mapname maptitle mapauthor savemap
                    uihlist $ui_padbutton [
                        uialign -1 0
                        uifill $ui_checksize
                        uitextleft "File Settings"
                    ]
                        uihlist $ui_padbutton [
                        uialign 1 0
                        uifill $ui_checksize
                        uitextleft "Map Name"
                        uiinput "mapname" 17 [] 1 0 [] () "mapname"
                    ]
                    uihlist $ui_padbutton [
                        uialign 1 0
                        uifill $ui_checksize
                        uitextleft "Map Title"
                        uiinput "maptitle" 17 [] 1 0 [] () "maptitle"
                    ]
                    uihlist $ui_padbutton [
                        uialign 1 0
                        uifill $ui_checksize
                        uitextleft "Map Author"
                        uiinput "mapauthor" 17 [] 1 0 [] () "mapauthor"
                    ]
                    uihlist $ui_padbutton [
                        uifill $ui_checksize
                        uichecktextbutton "Save Map" "" 0 .3 .025 [
                            savemap
                        ] $colourwhite $ui_default
                    ]
                ]
            ]
            uibar 1 0
            //lerp settings: lerpangle lerpsubdiv lerpsubdivsize
            uihlist $ui_padbutton [
                uialign -1 0
                uifill $ui_checksize
                uitextleft "Settings for Normalmap Interpolation"
            ]
            uihlist $ui_padbutton [
                uialign 1 0
                uifill $ui_checksize
                uitextleft "Interpolation Angle"
                uihorzslider "lerpangle" 0 180 1 0.2 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $lerpangle
                    ]
                ]
            ]
            uihlist $ui_padbutton [
                uialign 1 0
                uifill $ui_checksize
                uitextleft "Interpolation Subdivisions"
                uihorzslider "lerpsubdiv" 0 4 1 0.2 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $lerpsubdiv
                    ]
                ]
            ]
            uihlist $ui_padbutton [
                uialign 1 0
                uifill $ui_checksize
                uitextleft "Interpolation Subdiv Size"
                uihorzslider "lerpsubdivsize" 4 128 1 0.2 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $lerpsubdivsize
                    ]
                ]
            ]
            uibar 1 0
            uihlist $ui_padbutton [
                uialign -1 0
                uifill $ui_checksize
                uitextleft "Misc. Map Settings"
            ]
            //waterlod slider, for water detail (larger maps may prefer setting to 0)
            uihlist $ui_padbutton [
                uialign 1 0 // text is aligned rightwards, bumped up against the sliders in this ui
                uifill $ui_checksize
                uitextleft "Water LOD"
                uihorzslider "waterlod" 0 3 1 0.2 0.025 [
                    uifill 0.050 0
                    uitext (format "^f[%1]%2^%" (rgbtohex @(hsltorgb (*f (- 3 $waterlod) 36) 1 0.5)) $waterlod)
                ]
            ]
            //aggressiveness of remipper, at the expense of occlusion
            uihlist $ui_padbutton [
                uialign 1 0
                uifill $ui_checksize
                uitextleft "Maximum Merge Size"
                uihorzslider "maxmerge" 0 12 1 0.2 0.025 [
                    uivlist 0 [
                        uifill 0.050 0
                        uitext $maxmerge
                    ]
                ]
            ]
            uihlist $ui_padbutton [
                uialign 1 0
                uifill $ui_checksize
                uitextleft "Sky Texture Behavior"
                uiselect 0.2 0.025 "skytexture" [
                    0 "Transparent"     []
                    1 "Render Skybox"   []
                ] [uialign 1 0]
            ]
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uichecktextbutton "Customize Obituaries" "" 0 .56 .025 [
                    uiopen obituaries
                ] $colourwhite $ui_default
            ]
        ]
    ]
]
//Obituaries menu, accessed from the map ui [e] -> [a]
uimenu "obituaries" "Customize Obituaries" "<grey>textures/icons/editing" [
    uifill 0.38 0.3 //size of ui
    uivlist  $ui_padsmaller [
        uialign -1 -1
        uiclamp 1 1
        uivlist 0 [
            //edit player opacity, for other editors in coop edit
            looplist i [ fall death hurt water water2 water3 water4 lava lava2 lava3 lava4] [
                uihlist $ui_padbutton [
                    uialign 1 0
                    uifill $ui_checksize
                    uitextleft (concat $i "obituary")
                    uiinput (concatword "obit" $i) 36 [] 1 0 [] () (concatword "obit" $i)
                ]
            ]
        ]
    ]
]
//Multiplayer menu, accessed by [e]-[q] in the editing compass menu
uimenu "coopedit" "Multiplayer Settings" "<grey>textures/icons/editing" [
    uifill 0.38 0.4 //size of ui
    uivlist  $ui_padsmaller [
        uialign -1 -1
        uiclamp 1 1
        uivlist 0 [
            //edit player opacity, for other editors in coop edit
            uihlist $ui_padbutton [
                uialign 1 0 // text is aligned rightwards, bumped up against the sliders in this ui
                uifill $ui_checksize
                uitextleft "Player Opacity"
                uihorzslider "playereditblend" 0 1 .125 0.2 0.025 [
                    uifill 0.050 0
                    uitext ($playereditblend)
                ]
            ]
        ]
    ]
]
//entity editing, selection, and creation menu (default compass bind [e] -> [f])
uimenu "entities" "Find and Edit Entities" "<grey>textures/icons/editing" [
    uifill 0.3 0.48 //size of ui
    uivtab (+f $ui_slidersize 0.32) 0.48 $ui_tabw $ui_tabh ui_ent_tab [
        0 "New"      []
        1 "Find"     []
        2 "Edit"     []
    ]
    case $ui_ent_tab 0 [ //newent tab
        uivlist $ui_padbutton [
            uitext "Create New Entity"
            looplist j [ light lightfx mapmodel affinity playerstart envmap sound teleport pusher particles weapon checkpoint] [ //creates entry for each type
                uihlist $ui_padbutton [
                    uifill $ui_checksize
                    uifill $ui_checksize
                    uichecktextbutton $j "" 0 .2 .02 [
                        newent $j
                    ] $colourwhite $ui_default
                ]
            ]
            uialign 0 0
        ]
    ] 1 [ //find ents tab
        uivlist $ui_padbutton [
            uitext "Find Entities"
            uihlist $ui_padbutton [ //sets ui_ent_find for use in entfind and entfindinsel buttons
                    uifill $ui_checksize
                    uifill $ui_checksize
                    uitext "Find:"
                    uiinput "ui_ent_find" 11 [] 1 0 [] () "ui_ent_find"
                ]
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uifill $ui_checksize
                uichecktextbutton "Find Entities" "" 0 0.2 0.02 [
                    entfind $ui_ent_find
                ] $colourwhite $ui_default
            ]
            uihlist $ui_padbutton [
                uifill $ui_checksize
                uifill $ui_checksize
                uichecktextbutton "Find Ents in Sel" "" 0 .2 .02 [
                    entfind $ui_ent_find
                ] $colourwhite $ui_default
            ]
             uihlist $ui_padbutton [
                uifill $ui_checksize
                uifill $ui_checksize
                uichecktextbutton "Clear Selection" "" 0 .2 .02 [
                    entcancel
                ] $colourwhite $ui_default
            ]
            uialign 0 0
        ]

    ] 2 [  //edit entities tab
        if (= (enthavesel) 1) [ //only show setvalue + ent entries if an ent is selected
            uivlist  $ui_padsmaller [
                uihlist $ui_padbutton [
                    uitext "Set Value"
                    uiinput "ui_ent_set" 5 [] 1 0 [] () "ui_ent_set" //value to set entities to
                ]
                loop i 20 [  //20 may be high here, but more ent attributes may be added in the future
                    if (!=s (entattr $i) "") [ //if entattr != a blank string (there is a valid attr) then show the hlist below
                        uihlist $ui_padbutton [
                            uifill $ui_checksize //two $ui_checksize seem to space this correctly, but it's hacky
                            uifill $ui_checksize
                            ui_entities_index@i = (entattr $i) // variable ui_entities_index1,2,3 for attributes 1,2,3 etc.
                            uitext (getentattr (indexof $enttypelist (enttype)) $i 1) //gets the entitytypelist name for each attribute number
                            uichecktextbutton "+" "" 0 .012 .02 [ //adds 1 to entity attribute
                                entprop $i 1
                            ] $colourwhite $ui_default
                            uialign 1 1
                            uichecktextbutton "-" "" 0 .012 .02 [ //subtracts 1 from entity attribute
                                entprop $i -1
                            ] $colourwhite $ui_default
                            uifield [ui_entities_index@i] 4 [] 1 0 //show current value for attribute
                            uichecktextbutton "Set" "" 0 0.02 0.02 [ //sets value to attribute from Set Value box
                                entattr $i $ui_ent_set
                            ]
                        ]
                    ]
                ]
            ]
        ] [ //else display "no ent selected" message
            uivlist $ui_padsmaller [
                uihlist $ui_padbutton [
                    uifill $ui_checksize
                    uifill $ui_checksize
                    uitext "No entity selected"
                ]
                uihlist $ui_padsmaller [
                    uifill $ui_checksize
                    uifill $ui_checksize
                    uitext "Select an entity to edit"
                ]
            ]
        ]
    ]
]
//body of editref: the part that actually grabs the entries and displays them
//arg1: list of commands to create entries for
ui_editref_output = [
    looplist ui_editref_entry $arg1 [ //loops through argument to create a desc for each command
        if (!=s (getvardesc (concatword $ui_editref_entry alt)) "" ) [//if there is also a valid entry for <varname>alt, then add [alt] to the end (not intended to handle alt commands which are usually identical to their normal mode commands
            uitablerow [
                uivlist 0 [
                    uitextleft (format "%1[alt]" $ui_editref_entry ) //append "[alt]" to the end if command is normal/alt
                    uifill .22 $ui_padtiny
                    loop ui_editref_fields (getvarfields $ui_editref_entry) [
                        uitextleft (getvarfields $ui_editref_entry $ui_editref_fields) .8
                    ]
                ]
                uivlist $ui_padsmaller [
                    uitextleft (getvardesc $ui_editref_entry)
                    uialign -1 0
                ]
            ]
            uibar 1 0
        ] [ //else
            uitablerow [
                uivlist 0 [
                    uitextleft $ui_editref_entry
                    uifill .22 $ui_padtiny
                    loop ui_editref_fields (getvarfields $ui_editref_entry) [
                            uitextleft (getvarfields $ui_editref_entry $ui_editref_fields) .8
                    ]
                ]
                uivlist $ui_padsmaller [
                    uitextleft (getvardesc $ui_editref_entry)
                    uialign -1 0
                ]
            ]
            uibar 1 0
        ]
    ]
]
//editing reference: Red Eclipse Editing Encyclopedia
uimenu "editref" "The REEE" $questiontex [
    hidechanges 1
    uihlist 0 [
        uiclamp 1 1 1 1
        // side tab, editref menu
        uivtab .85 0.5 $ui_tabw $ui_tabh ui_editref_tab [ //tabs in left part of UI
            0 "About" []
            1 "ABC"   []
            2 "DEF"   []
            3 "GHI"   []
            4 "JKL"   []
            5 "MNO"   []
            6 "PQRS"  []
            7 "TUV"   []
            8 "WXYZ"  []
        ] [
            uiscroll .8 0.5 [
                uialign -1 0
                uifill .8 0.5 [
                    uialign 0 -1
                    uipad $ui_padbutton $ui_padbutton $ui_padbutton $ui_padbutton [
                        uialign 0 -1
                        uiclamp 1 1
                        uitable 0 $ui_padsmall [
                            uialign -1 -1
                            uiclamp 1 1
                            case $ui_editref_tab 0 [ //title "about" page
                                uitablerow [
                                    uitext "The Red Eclipse Editing Encyclopedia (REEE)" 1.5
                                ]
                                uitablerow [
                                    uivlist $ui_padsmaller [
                                        uitext "The Red Eclipse Editing Encyclopedia (REEE) is the primary edit command reference."
                                        uitext "Commands with alt modes have [alt] appended to their names."
                                        uitext "This UI is incomplete and entries are in progress."
                                        uibar 1 0
                                    ]
                                ]
                                uitablerow [
                                    uivlist $ui_padsmaller [
                                        uitext "Entries listed are all edit commands, used by entering the console with [/]"
                                        uitext "and typing the desired command and its arguments."
                                        uifill $ui_checksize $ui_checksize
                                        uitext "Entry fields are listed below the command; descriptions to the right."
                                    ]
                                ]
                            //go through and execute the entry maker (ui_editref_output, immediately above this ui) for each var
                            ] 1 [ //ABC
                                ui_editref_output $ui_editref_abc
                            ] 2 [ // DEF
                                ui_editref_output $ui_editref_def
                            ] 3 [ // GHI
                                ui_editref_output $ui_editref_ghi
                            ] 4 [ // JKL
                                ui_editref_output $ui_editref_jkl
                            ] 5 [ // MNO
                                ui_editref_output $ui_editref_mno
                            ] 6 [ // PQRS
                                ui_editref_output $ui_editref_pqrs
                            ] 7 [ // TUV
                                ui_editref_output $ui_editref_tuv
                            ] 8 [ // WXYZ
                                ui_editref_output $ui_editref_wxyz
                            ]
                        ]
                    ]
                ]
            ]
            uihlist 0 [uivscroll $ui_slidersize 0.5 3; uialign 1 0; uiclamp 0 1] //scrollbar
        ]
    ]
]

macro resbutton [
    guibutton "%1x%2" "screenres %1 %2" [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (&& [= $scr_w %1] [= $scr_h %2]) "radioboxon" "") $guiradioboxcolour
]

checkboxdesc = [
    if (= $arg2 1) [
        guitext $arg1 "checkbox" 0xFFFFFF 0xFFFFFF -1 1 "checkboxon" $guicheckboxtwocolour
    ] [
        guilist [
            guitext $arg1 "checkbox" 0xFFFFFF 0xFFFFFF -1 1 "checkboxon" $guicheckboxcolour
            guitext $arg2 "checkbox" 0xFFFFFF 0xFFFFFF -1 1 "checkboxon" $guicheckboxtwocolour
        ]
    ]
]

newgui options [
    guione [
        guifont "emphasis" [
            guicenter [ guibutton "graphics" [ showgui options_graphics ] ]
            guicenter [ guibutton "gameplay" [ showgui options_gameplay ] ]
            guicenter [ guibutton "display" [ showgui options_display ] ]
            guicenter [ guibutton "user interface" [ showgui options_ui ] ]
            guicenter [ guibutton "sound" [ showgui options_sound ] ]
            guicenter [ guibutton "controls" [ showgui options_controls ] ]
            guistrut 0.5
            guicenter [ guibutton "autoexec" [ showgui options_autoexec ] ]
        ]
    ]
    cases $guirollovername "graphics" [
        guitooltip "configure graphical quality settings"
    ] "display" [
        guitooltip "configure display options and resolution"
    ] "user interface" [
        guitooltip "configure user interface and in-game hud settings"
    ] "sound" [
        guitooltip "configure sound and music settings"
    ] "controls" [
        guitooltip "configure controls, keyboard and mouse settings"
    ] "autoexec" [
        guitooltip "modify your autoexec.cfg, which is executed every launch"
    ]
    guistatus "select an option to edit your configuration options"
]

newgui options_graphics [
    guiheader "graphics"
    guistrut 67 1
    guitext "performance key: ^fgfast^f~, ^fymoderate^f~, ^foslow and pretty^f~"
    guibar
    guilist [
        guilist [
            guilist [
                guistrut 2.4
                guitext "shaders"
            ]
            guilist [
                guistrut 2.4
                guitext "water"
            ]
            guilist [
                guistrut 2.4
                guitext "waterfalls"
            ]
            guicheckbox     "^fosoft shadows"       shadowmap
            if $glare [
                glarepreset = 0
                if (= $glarescale 1) [
                    if (= $blurglare 4) [glarepreset = 1]
                    if (= $blurglare 7) [glarepreset = 3]
                ]
                if (= $glarescale 2) [
                    if (= $blurglare 3) [glarepreset = 2]
                    if (= $blurglare 7) [glarepreset = 4]
                ]
                guicheckbox "^foglare"              glare
            ] [
                guicheckbox "^foglare"              glare
            ]
            guicheckbox "^fomotion blur"            motionblur
            guicheckbox "^fograss"                      grass
            guicheckbox "^fgdynamic lights"         maxdynlights 3 0
            guicheckbox "^fysoft particles"         depthfx
            guicheckbox "^fgglass reflection"           glassenv
            guicheckbox "^fgdecals"                     decals
            guicheckbox "^fgfix t-joints (world sparklies)" filltjoints
            guilist [
                guistrut 2.4
                guitext "textures"
            ]
            guilist [
                guistrut 2.4
                guitext "models"
            ]
        ]
        guispring 1
        guibar
        guispring 1
        guilist [
            guilist [   // shaders
                guiradio "^fglow detail" shaderdetail 1
                guistrut 1
                guiradio "^fyhigh detail" shaderdetail 3
            ]
            guilist [   // water
                guicheckbox "^fyrefraction" waterrefract
                guistrut 1
                guicheckbox "^foreflection" waterreflect
                guistrut 1
                guicheckbox "^fgenvmap" waterenvmap
            ]
            guilist [   // waterfalls
                guicheckbox "^fyrefraction" waterfallrefract
                guistrut 1
                guicheckbox "^fgreflection" waterfallenv
            ]
            guilist [   // shadows
                if $shadowmap [
                    guiradio "^fymedium quality" shadowmapsize 9 [blurshadowmap 1]
                    guistrut 1
                    guiradio "^fohigh quality" shadowmapsize 10 [blurshadowmap 2]
                ] [
                    guicheckbox "^fgblob shadows" blobs
                ]
            ]
            guilist [   // glare
                if $glare [
                    guiradio "^fysubtle" glarepreset 1 [blurglare 4; glarescale 1]
                    guistrut 1
                    guiradio "^fyglowy" glarepreset 2 [blurglare 3; glarescale 2]
                    guistrut 1
                    guiradio "^fosoft" glarepreset 3 [blurglare 7; glarescale 1]
                    guistrut 1
                    guiradio "^fointense" glarepreset 4 [blurglare 7; glarescale 2]
                ] [ guinohitfx [
                    guitext "^fAsubtle" radiodisable
                    guistrut 1
                    guitext "^fAglowy" radiodisable
                    guistrut 1
                    guitext "^fAsoft" radiodisable
                    guistrut 1
                    guitext "^fAintense" radiodisable
                ] ]
            ]
            guilist [   // motion blur
                if $motionblur [
                    guiradio "^fosubtle" motionblurscale 0.5
                    guistrut 1
                    guiradio "^fomoderate" motionblurscale 1
                ] [ guinohitfx [
                    guitext "^fAsubtle" radiodisable
                    guistrut 1
                    guitext "^fAmoderate" radiodisable
                ] ]
            ]
            guilist [   // grass
                if $grass [
                    guiradio "^fyquick fade" grassdist 128
                    guistrut 1
                    guiradio "^fymoderate fade" grassdist 256
                    guistrut 1
                    guiradio "^foslow fade" grassdist 512
                ] [ guinohitfx [
                    guitext "^fAquick fade" radiodisable
                    guistrut 1
                    guitext "^fAmoderate fade" radiodisable
                    guistrut 1
                    guitext "^fAslow fade" radiodisable
                ] ]
            ]
            guilist [   // dynamic lights
                if $maxdynlights [
                    guiradio "^fgmedium quality" maxdynlights 3
                    guistrut 1
                    guiradio "^fyhigh quality" maxdynlights 5
                ] [ guinohitfx [
                    guitext "^fAmedium quality" radiodisable
                    guistrut 1
                    guitext "^fAhigh quality" radiodisable
                ] ]
            ]
            guilist [   // soft particles
                if $depthfx [
                    guiradio "^fglow quality" depthfxsize 7 [blurdepthfx 1]
                    guistrut 1
                    guiradio "^fymedium quality" depthfxsize 10 [blurdepthfx 0]
                    guistrut 1
                    guiradio "^fohigh quality" depthfxsize 12 [blurdepthfx 0]
                ] [ guinohitfx [
                    guitext "^fAlow quality" radiodisable
                    guistrut 1
                    guitext "^fAmedium quality" radiodisable
                    guistrut 1
                    guitext "^fAhigh quality" radiodisable
                ] ]
            ]
            guitext " "  // spacer for glass reflection
            guilist [   // decals
                if $decals [
                    guiradio "^fgmedium quality" maxdecaltris 512
                    guistrut 1
                    guiradio "^fyhigh quality" maxdecaltris 1024
                ] [ guinohitfx [
                    guitext "^fAmedium quality" radiodisable
                    guistrut 1
                    guitext "^fAhigh quality" radiodisable
                ] ]
            ]
            guitext " " // spacer for t-joints
            guilist [   // textures
                guiradio "^fglow quality" maxtexsize 256
                guistrut 1
                guiradio "^fgmedium quality" maxtexsize 512
                guistrut 1
                guiradio "^fyhigh quality" maxtexsize 0
            ]
            guilist [   // models
                guicheckbox "^fgreflection" envmapmodels
                guistrut 1
                guicheckbox "^fybumpmap" bumpmodels
            ]
        ]
    ]

    guitab postfx
    guistayopen [
        guibutton "(effect OFF)" "clearpostfx"
        guibutton "bloom (subtle: 30%)" "bloom 0.3"
        guibutton "bloom (bright: 55%)" "bloom 0.55"
        guibutton "bloom (intense: 80%)" "bloom 0.8"
        guibutton "rotoscope" "rotoscope 1"
        guibutton "rotoscope + blur3" "rotoscope 1 1"
        guibutton "rotoscope + blur5" "rotoscope 1 2"
        guibutton "sharpen" "setpostfx sharpen"
        guibutton "sobel" "setpostfx sobel"
        guibutton "invert" "setpostfx invert"
        guibutton "gbr" "setpostfx gbr"
        guibutton "bw" "setpostfx bw"
        guibutton "blur3" "setpostfx hblur3; addpostfx vblur3"
        guibutton "blur5" "setpostfx hblur5; addpostfx vblur5"
    ]
    guitab 3Dfx
    guistayopen [
        guibutton "(effect OFF)" "viewtype 0"
        guibutton "side-by-side" "viewtype 1"
        guibutton "no glasses" "viewtype 2"
        guibutton "anaglyph red/blue (R/B glasses)" "viewtype 3"
        guibutton "anaglyph red/cyan blend (R/G glasses)" "viewtype 4"
        guibutton "anaglyph red/cyan (R/C glasses)" "viewtype 5"
        guibutton "polarized" "viewtype 6"
    ]
]

newgui options_gameplay [
    guiheader "gameplay"
    guistrut 0.5
    guistrut 50 1
    guilist [
        guitext "player perspective: "
        guiradio "first-person" thirdperson 0
        guistrut 1
        guiradio "third-person" thirdperson 1
    ]
    guistrut 1
    if $thirdperson [
        guilist [
            guitext "third-person view distance:"
            guistrut 1
            guispring 1
            guilist [
                guistrut 25 1
                guislider thirdpersondist 1 20
            ]
        ]
        guistrut 0.5
        guilist [
            guitext "third-person side:"
            guistrut 1
            guispring 1
            guilist [
                guistrut 25 1
                guislider thirdpersonside -20 20
            ]
        ]
        guistrut 0.5
        guilist [
            guitext "third-person cursor: "
            guiradio "auto-correcting" thirdpersoncursor 1
            guistrut 1
            guiradio "static" thirdpersoncursor 0
        ]
        guistrut 0.5
        guilist [
            guitext "third-person opacity:"
            guispring 1
            guilist [
                guistrut 25 1
                thirdpersonblendstorage = (*f $thirdpersonblend 100)
                guislider thirdpersonblendstorage 0 100 [ thirdpersonblend (divf $thirdpersonblendstorage 100) ] 0 0 0xFFFFFF 1
            ]
        ]
        guistrut 0.5
        guilist [
            guitext "third-person field of view:"
            guistrut 1
            guispring 1
            guilist [
                guistrut 25 1
                guislider thirdpersonfov 90 150
            ]
        ]
    ] [ // first person options
        guistrut 1.9
        guicheckbox "first-person bob effect" firstpersonbob 1 0
        guistrut 0.5
        guicheckbox "first-person sway effect" firstpersonsway 1 0
        guistrut 0.5
        guilist [
            guitext "first-person opacity:"
            guispring 1
            guilist [
                guistrut 25 1
                firstpersonblendstorage = (*f $firstpersonblend 100)
                guislider firstpersonblendstorage 0 100 [ firstpersonblend (divf $firstpersonblendstorage 100) ] 0 0 0xFFFFFF 1
            ]
        ]
        guistrut 0.5
        guilist [
            guitext "first-person field of view:"
            guistrut 1
            guispring 1
            guilist [
                guistrut 25 1
                guislider firstpersonfov 90 150
            ]
        ]
    ]
    guistrut 0.5
    guilist [
        guitext "editing field of view:"
        guistrut 1
        guispring 1
        guilist [
            guistrut 25 1
            guislider editfov 1 179
        ]
    ]
    guistrut 0.5
    guilist [
        guitext "spectator field of view:"
        guistrut 1
        guispring 1
        guilist [
            guistrut 25 1
            guislider specfov 1 179
        ]
    ]
    guistrut 1
    guitext "player colour tones in team games:"
    playertone = 0
    if (&& (= $playerovertone 0) (= $playerundertone 1)) [playertone = 1]
    if (&& (= $playerovertone 0) (= $playerundertone 2)) [playertone = 2]
    if (&& (= $playerovertone 0) (= $playerundertone 5)) [playertone = 3]
    guilist [
        guiradio "profile and team" playertone 1 [playerovertone 0; playerundertone 1]
        guistrut 2
        guiradio "team only" playertone 2 [playerovertone 0; playerundertone 2]
        guistrut 2
        guiradio "mixed colour" playertone 3 [playerovertone 0; playerundertone 5]
    ]
    guistrut 0.5
    guicheckbox "show vanity items" vanitymodels
    guistrut 0.5
    guilist [
        guitext "brighten models:"
        guistrut 1
        guispring 1
        guilist [
            guistrut 25 1
            guislider fullbrightmodels 0 200 [] 0 0 0xFFFFFF 1
        ]
    ]
    guistrut 0.5
    hintslider = (*f 100 $playerhintblend)
    guilist [
        guitext "glow effect:"
        guistrut 1
        guispring 1
        guilist [
            guistrut 25 1
            guislider hintslider 0 100 [playerhintblend (*f 0.01 $hintslider)] 0 0 0xFFFFFF 1
        ]
    ]
    guistrut 0.5
    guilist [
        guitext "death animation:"
        guistrut 1
        guiradio "on" deathanim 2
        guistrut 1
        guiradio "not in duel/survivor" deathanim 3
        guistrut 1
        guiradio "never" deathanim 0
    ]
    guistrut 0.5
    guilist [
        guitext "blood and gore:"
        guispring
        guicheckbox "splatter" bloodscale
        guispring
        guicheckbox "gibs" gibscale
        guispring
        if $gibscale [
            guicheckbox "sparks" bloodsparks"
        ] [
            guitext "sparks" "textures/checkbox" 0x808080 0x666666
        ]
        guispring
    ]
    guistrut 1
    guilist [
        guilist [
            guitext "skip weapons:"
            guistrut 2
        ]
        guistrut 5
        guilist [
            guicheckbox "^f($pistoltex)pistol" skippistol 10 0 [] $pistolcolour
            guicheckbox "^f($clawtex)claw" skipclaw 10 0 [] $clawcolour
        ]
        guistrut 5
        guilist [
            guicheckbox "^f($grenadetex)grenades" skipgrenade 10 0 [] $grenadecolour
            guicheckbox "^f($minetex)mines" skipmine 10 0 [] $minecolour
            guicheckbox "^f($rockettex)rockets" skiprocket 10 0 [] $rocketcolour
        ]
    ]
    guistrut 0.5
    guicenter [guicheckbox "ignore pickups of skipped weapons" skippickup]
    guistrut 1
    guilist [
        guitext "weapon zoom level:"
        guistrut 1
        guispring 1
        guilist [
            guistrut 25 1
            guislider zoomlevel 0 5
        ]
    ]
    guistrut 0.5
    guilist [
        guitext "spectator/edit float speed:"
        guistrut 1
        guispring 1
        guilist [
            guistrut 25 1
            guislider floatspeed 1 2000
        ]
    ]
]

newgui options_display [
    guiheader "display"
    guistrut 50 1
    guilist [
        guitext "v-sync: "
        guiradio "on " vsync 1
        guiradio "off " vsync 0
    ]
    guilist [
        guitext "fullscreen: "
        guiradio "on " fullscreen 1
        guiradio "off " fullscreen 0
    ]
    guistrut 1
    guitext "gamma (default: 100)"
    guislider gamma
    guitext "full-scene anti-aliasing (default: -1)"
    guilistslider fsaa "-1 0 2 4 8 16"
    guitext "z-buffer depth (default: 0)"
    guilistslider depthbits "0 16 24 32"
    guitext "anisotropic filtering (default: 0)"
    guilistslider anisotropy "0 2 4 8 16"

    guitab "resolution"
    guistayopen [
        guilist [
            guilist [
                guifont "emphasis" [ guitext "^fa4:3" ]
                @(resbutton 320 240)
                @(resbutton 640 480)
                @(resbutton 800 600)
                @(resbutton 1024 768)
                @(resbutton 1152 864)
                @(resbutton 1280 960)
                @(resbutton 1400 1050)
                @(resbutton 1600 1200)
                @(resbutton 1792 1344)
                @(resbutton 1856 1392)
                @(resbutton 1920 1440)
                @(resbutton 2048 1536)
                @(resbutton 2800 2100)
                @(resbutton 3200 2400)
            ]
            guistrut 0.5
            guibar
            guistrut 0.5
            guilist [
                guifont "emphasis" [ guitext "^fa16:10" ]
                @(resbutton 320 200)
                @(resbutton 640 400)
                @(resbutton 1024 640)
                @(resbutton 1280 800)
                @(resbutton 1440 900)
                @(resbutton 1600 1000)
                @(resbutton 1680 1050)
                @(resbutton 1920 1200)
                @(resbutton 2048 1280)
                @(resbutton 2560 1600)
                @(resbutton 2880 1800)
                @(resbutton 3200 2000)
                @(resbutton 3840 2400)
            ]
            guistrut 0.5
            guibar
            guistrut 0.5
            guilist [
                guifont "emphasis" [ guitext "^fa16:9" ]
                @(resbutton 1024 600)
                @(resbutton 1280 720)
                @(resbutton 1366 768)
                @(resbutton 1600 900)
                @(resbutton 1920 1080)
                @(resbutton 2048 1152)
                @(resbutton 2560 1440)
                @(resbutton 2880 1620)
                @(resbutton 3200 1800)
                @(resbutton 3840 2160)
            ]
            guistrut 0.5
            guibar
            guistrut 0.5
            guilist [
                guifont "emphasis" [ guitext "^fa5:4" ]
                @(resbutton 600 480)
                @(resbutton 1280 1024)
                @(resbutton 1600 1280)
                @(resbutton 2560 2048)
            ]
            guistrut 0.5
            guibar
            guistrut 0.5
            guilist [
                guifont "emphasis" [ guitext "^fa5:3" ]
                @(resbutton 800 480)
                @(resbutton 1280 768)
                guibar
                guitext "Custom"
                guilist [
                    customw = $scr_w
                    customh = $scr_h
                    guifield customw 4 [scr_w $customw]
                    guifield customh 4 [scr_h $customh]
                ]
            ]
        ]
    ]
]

newgui options_ui [
    guiheader "user interface options"
    guione [
        guifont "emphasis" [
            guicenter [ guibutton "console" [ showgui options_console ] ]
            guicenter [ guibutton "crosshair" [ showgui options_crosshair ] ]
            guicenter [ guibutton "menus" [ showgui options_menus ] ]
            guicenter [ guibutton "radar" [ showgui options_radar ] ]
            guicenter [ guibutton "scoreboard" [ showgui options_scoreboard ] ]
            guicenter [ guibutton "statistics" [ showgui options_stats ] ]
        ]
    ]
]

newgui options_radar [
    guiheader "radar options"
    guistrut 0.5
    guistayopen [
        guilist [
            guilist [
                guicheckbox2 "show radar" showradar 1
                guicheckbox2 "show items" radaritems 1
                guicheckbox2 "show players" radarplayers 1
            ]
            guistrut 2
            guilist [
                guicheckbox2 "show affinities" radaraffinity 1
                guicheckbox2 "show item names" radaritemnames 1
                guicheckbox2 "show player names" radarplayernames 1
            ]
        ]
        guistrut 0.25
        guinohitfx [
            guilist [
                guiimage "textures/checkboxon.png" "" 0.5 "" "" "" 0x1CD31C
                guifont "little" [ guitext " = visible in-game" ]
            ]
            guilist [
                guiimage "textures/checkboxon.png" "" 0.5 "" "" "" 0xD31CD3
                guifont "little" [ guitext " = visible in-game & in specTV" ]
            ]
        ]
        guistrut 0.5
        guilist [
            guitext "radar style"
            guistrut 1
            guifont "little" [ guitext "^fa(default: compass-distance)" ]
        ]
        guilist [
            guiradio2 "compass" radarstyle 0
            guistrut 1
            guiradio2 "compass-distance" radarstyle 1
            guistrut 1
            guiradio2 "full-hud" radarstyle 2
            guistrut 1
            guiradio2 "corner" radarstyle 3
        ]
        guistrut 0.5
        guitext "filter radar by:"
        guilist [
            guiradio2 "off" radarplayerfilter 0
            guistrut 1
            guiradio2 "non-team only" radarplayerfilter 1
            guistrut 1
            guiradio2 "team only" radarplayerfilter 2
            guistrut 1
            guiradio2 "duel/survivor/edit only" radarplayerfilter 3
        ]
        guistrut 0.5
        if (< $radarstyle 3) [
            guilist [
                guitext "radar opacity:"
                guispring 1
                guilist [
                    guistrut 25 1
                    radarblendstorage = (*f $radarblend 100)
                    guislider radarblendstorage 0 100 [ radarblend (divf $radarblendstorage 100) ]
                ]
            ]
        ] [
            guilist [
                guitext "radar corner opacity:"
                guispring 1
                guilist [
                    guistrut 25 1
                    radarcornerblendstorage = (*f $radarcornerblend 100)
                    guislider radarcornerblendstorage 0 100 [ radarcornerblend (divf $radarcornerblendstorage 100) ]
                ]
            ]
        ]
        guilist [
            guitext "radar detect distance:"
            guispring 1
            guilist [
                guistrut 25 1
                radardiststorage = (*f $radardist 0.1 )
                guislider radardiststorage 0 300 [ radardist (divf $radardiststorage 0.1 ) ]
            ]
        ]
    ]
    guistrut 0.5
    guifont "little" [
        cases $guirollovername "show radar" [
            guitext "toggles visibility of the radar" "" 0x22FF22 "" 1200
        ] "show affinities" [
            guitext "toggles visibility of affinity blips (bomb, flag)" "" 0x22FF22 "" 1200
        ] "show items" [
            guitext "toggles visibility of item blips" "" 0x22FF22 "" 1200
        ] "show item names" [
            guitext "toggles visibility of item names" "" 0x22FF22 "" 1200
        ] "show players" [
            guitext "toggles visibility of player blips" "" 0x22FF22 "" 1200
        ] "show player names" [
            guitext "toggles visibility of player names" "" 0x22FF22 "" 1200
        ]
        cases $guirollovername "compass" [
            guitext "compass styled radar showing the direction of targets (classic style)" "" 0x22FF22 "" 1200
        ] "compass-distance" [
            guitext "compass styled radar showing the direction and relative distance of targets" "" 0x22FF22 "" 1200
        ] "full-hud" [
            guitext "compass styled radar showing the direction and relative distance of targets with overlaid points of interest" "" 0x22FF22 "" 1200
        ] "corner" [
            guitext "top-down view styled radar in the top-right corner of the screen showing actual positions of targets" "" 0x22FF22 "" 1200
        ]
        cases $guirollovername "off" [
            guitext "no filters applied to radar" "" 0x22FF22 "" 1200
        ] "non-team only" [
            guitext "radar is filtered to show only enemy teams (or enemies in Free-for-All)" "" 0x22FF22 "" 1200
        ] "team only" [
            guitext "radar is filtered to show only your own team members" "" 0x22FF22 "" 1200
        ] "duel/survivor/edit only" [
            guitext "radar is filtered to show only in the duel and survivor mutators, and edit mode" "" 0x22FF22 "" 1200
        ]
        guistrut 1.5
    ]
]

newgui options_crosshair [
    guiheader "crosshair options"
    guistrut 0.5
    guistayopen [
        guitext "show crosshair:"
        guilist [
            guiradio2 "disable crosshair" showcrosshair 0
            guistrut 1
            guiradio2 "normal crosshair" showcrosshair 1
            guistrut 1
            guiradio2 "blend crosshair by accuracy" showcrosshair 2
        ]
        guistrut 0.5
        guitext "weapon crosshairs:"
        guilist [
            guiradio2 "off" crosshairweapons 0
            guistrut 1
            guiradio2 "specific to weapon" crosshairweapons 1
            guistrut 1
            guiradio2 "weapon colour only" crosshairweapons 2
            guistrut 1
            guiradio2 "specific to weapon & colour" crosshairweapons 3
        ]
        guistrut 0.5
        guitext "weapon ammo/clip surrounding crosshair:"
        guilist [
            guiradio2 "no visible clip" showclips 0
            guistrut 1
            guiradio2 "show solid bar of clip" showclips 1
            guistrut 1
            guiradio2 "show individual clip" showclips 2
        ]
        guistrut 0.5
        guilist [
            guilist [
                guicheckbox2 "critical flash" crosshairflash
                guicheckbox2 "show crosshair distance (edit only)" crosshairdistance
            ]
        ]
        guistrut 0.5
        guitext "crosshair textures, size, opacity:"
        guistrut 0.5
        guilist [
            guilist [
                guiimage $crosshairtex [showgui options_xhair] 2 1 "textures/nothumb" [crosshairtex "crosshairs/cross-01"]
            ]
            guistrut 1
            guilist [
                guifont "little" [ guitext (stringreplace $crosshairtex "crosshairs/" "") ]
            ]
        ]
        guistrut 0.5
        guifont "little" [
            cases $guirollovername "disable crosshair" [
                guitext "disable visibility of the crosshair" "" 0x22FF22 "" 1200
            ] "normal crosshair" [
                guitext "displays a normal crosshair" "" 0x22FF22 "" 1200
            ] "blend crosshair by accuracy" [
                guitext "displays a normal crosshair that blends depending on your current accuracy" "" 0x22FF22 "" 1200
            ] "off" [
                guitext "disable weapon-specific crosshairs" "" 0x22FF22 "" 1200
            ] "specific to weapon" [
                guitext "displays a crosshair that changes form depending on the weapon you are using" "" 0x22FF22 "" 1200
            ] "weapon colour only" [
                guitext "displays a normal crosshair that is coloured by the weapon you are using" "" 0x22FF22 "" 1200
            ] "specific to weapon & colour" [
                guitext "displays a crosshair that changes form and colour depending on the weapon you are using" "" 0x22FF22 "" 1200
            ] "no visible clip" [
                guitext "no clip surrounding the crosshair is displayed" "" 0x22FF22 "" 1200
            ] "show solid bar of clip" [
                guitext "a solid bar of clip is displayed in a circular fashion around the crosshair" "" 0x22FF22 "" 1200
            ] "show individual clip" [
                guitext "individual shots of clip are displayed in a circular fashion around the crosshair" "" 0x22FF22 "" 1200
            ] "critical flash" [
                guitext "crosshair flashes red when your health has reached a critical point" "" 0x22FF22 "" 1200
            ] "show crosshair distance (edit only)" [
                guitext "shows the distance to the geometry you are currently aiming at (this is only available in editing mode)" "" 0x22FF22 "" 1200
            ]
            cases $guirollovername $crosshairtex [
                guitext "click here to change the crosshair textures, size & opacity (right click to reset texture)" "" 0x22FF22 "" 1200
            ]
        ]
        guistrut 1.5
    ]
]

newgui options_stats [
    guiheader "statistics options"
    guistrut 0.5
    guistayopen [
        guilist [
            guilist [
                guicheckbox "show damage above head" aboveheaddamage
                guicheckbox "show names above head" aboveheadnames
                guistrut 0.25
                if $aboveheadnames [
                    guilist [
                        guitext "names opacity:"
                        guispring 1
                        guilist [
                            guistrut 25 1
                            aboveheadnamesblendstorage = (*f $aboveheadnamesblend 100)
                            guislider aboveheadnamesblendstorage 0 100 [ aboveheadnamesblend (divf $aboveheadnamesblendstorage 100) ]
                        ]
                    ]
                    guilist [
                        guitext "names size:"
                        guispring 1
                        guilist [
                            guistrut 25 1
                            aboveheadnamessizestorage = (*f $aboveheadnamessize 1)
                            guislider aboveheadnamessizestorage 0 10 [ aboveheadnamessize (divf $aboveheadnamessizestorage 1) ]
                        ]
                    ]
                ]
                guistrut 0.5
                guitext "show icons above head:"
                guistrut 0.25
                guilist [
                    guibitfield "damage & kill events" aboveheadicons 1
                    guistrut 1
                    guibitfield "affinity pickups (flag, bomb)" aboveheadicons 2
                ]
                guilist [
                    guibitfield "weapon pickups" aboveheadicons 4
                    guistrut 5
                    guicheckbox "player teams" aboveheadteam 3 0
                ]
                guistrut 0.25
                guilist [
                    guitext "icons opacity:"
                    guispring 1
                    guilist [
                        guistrut 25 1
                        aboveheadiconsblendstorage = (*f $aboveheadiconsblend 100)
                        guislider aboveheadiconsblendstorage 0 100 [ aboveheadiconsblend (divf $aboveheadiconsblendstorage 100) ]
                    ]
                ]
                guilist [
                    guitext "icons size:"
                    guispring 1
                    guilist [
                        guistrut 25 1
                        aboveheadiconssizestorage = (*f $aboveheadiconssize 1)
                        guislider aboveheadiconssizestorage 0 10 [ aboveheadiconssize (divf $aboveheadiconssizestorage 1) ]
                    ]
                ]
            ]
        ]
        guistrut 0.5
        guitext "impulse meter:"
        guilist [
            guiradio2 "no impulse shown" inventoryimpulse 0
            guistrut 1
            guiradio2 "visual impulse bar" inventoryimpulse 2
            guistrut 1
            guiradio2 "textual percentage" inventoryimpulse 1
        ]
        guistrut 0.5
        guitext "velocity meter:"
        guilist [
            guiradio2 "no velocity shown" inventoryvelocity 0
            guistrut 1
            guiradio2 "race mode only" inventoryvelocity 1
            guistrut 1
            guiradio2 "always visible" inventoryvelocity 2
        ]
        guistrut 0.5
        guitext "on-screen keyboard input:"
        guilist [
            guibitfield "your keys" inventoryinput 1
            guistrut 1
            guibitfield "others' keys (when spectating)" inventoryinput 2
        ]
        guistrut 0.5
        guitext "on-screen FPS display:"
        guilist [
            guiradio2 "no FPS" showfps 0
            guistrut 1
            guiradio2 "show number only" showfps 1
            guistrut 1
            guiradio2 "verbose" showfps 2
            guistrut 1
            guiradio2 "more verbose" showfps 3
        ]
        guistrut 0.5
        guilist [
            guitext "on-screen notifications:"
            guistrut 1
            guifont "little" [ guitext "^fa(default: level 3)" ]
        ]
        guilist [
            guiradio2 "none" shownotices 0
            guistrut 1
            guiradio2 "basic only" shownotices 1
            guistrut 1
            guiradio2 "level 2" shownotices 2
            guistrut 1
            guiradio2 "level 3" shownotices 3
            guistrut 1
            guiradio2 "everything" shownotices 4
        ]
        guistrut 0.5
        guilist [
            guitext "top scores:"
            guispring 1
            guilist [
                guistrut 25 1
                guislider inventoryscore 1 8
            ]
        ]
        guifont "little" [ guitext (format "^fadefault: %1" (getvardef inventoryscore 1) ) ]
        guistrut 0.5
        guifont "little" [
            cases $guirollovername "show damage above head" [
                guitext "flashing damage counters are displayed above the heads of enemies that receive damage" "" 0x22FF22 "" 1200
            ] "show names above head" [
                guitext "the names of players and bots are displayed above their heads" "" 0x22FF22 "" 1200
            ] "damage & kill events" [
                guitext "when a player is hurt or killed, an icon is displayed above their head" "" 0x22FF22 "" 1200
            ] "affinity pickups (flag, bomb)" [
                guitext "when a player picks up an affinity such as a flag or bomb, an icon is displayed above their head" "" 0x22FF22 "" 1200
            ] "weapon pickups" [
            guitext "when a player spawns with or picks up a weapon, the specific weapon icons are displayed above their head" "" 0x22FF22 "" 1200
            ] "player teams" [
                guitext "a team icon is displayed above the head of all players in team matches" "" 0x22FF22 "" 1200
            ] "no impulse shown" [
                guitext "the impulse meter will never be visible" "" 0x22FF22 "" 1200
            ] "visual impulse bar" [
                guitext "the impulse meter will be shown as a graphical bar visible on the left side of the screen " "" 0x22FF22 "" 1200
            ] "textual percentage" [
                guitext "the impulse meter will be shown as a textual percentage visible on the left side of the screen" "" 0x22FF22 "" 1200
            ] "no velocity shown" [
                guitext "the velocity meter will never be visible" "" 0x22FF22 "" 1200
            ] "race mode only" [
                guitext "the velocity meter will be visible in race mode only" "" 0x22FF22 "" 1200
            ] "always visible" [
                guitext "the velocity meter will be visible in all modes" "" 0x22FF22 "" 1200
            ]
            cases $guirollovername "your keys" [
                guitext "toggles visibility of your own keyboard input when playing" "" 0x22FF22 "" 1200
            ] "others' keys (when spectating)" [
                guitext "toggles visibility of other players' keyboard input when spectating" "" 0x22FF22 "" 1200
            ] "no FPS" [
                guitext "FPS will not be displayed on the screen" "" 0x22FF22 "" 1200
            ] "show number only" [
                guitext "frames per second (FPS) will be displayed in the bottom-right corner of the screen" "" 0x22FF22 "" 1200
            ] "verbose" [
                guitext "FPS (as well as max FPS) will be displayed in the bottom-right corner of the screen" "" 0x22FF22 "" 1200
            ] "more verbose" [
                guitext "FPS (as well as max FPS & FPS range) will be displayed in the bottom-right corner of the screen" "" 0x22FF22 "" 1200
            ] "none" [
                guitext "no on-screen notifications will be displayed" "" 0x22FF22 "" 1200
            ] "basic only" [
                guitext "only the most basic on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
            ] "level 2" [
                guitext "up to level 2 on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
            ] "level 3" [
                guitext "up to level 3 on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
            ] "everything" [
                guitext "all on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
            ]
        ]
        guistrut 1.5
    ]
]

newgui options_scoreboard [
    guiheader "scoreboard options"
    guistrut 0.5
    guistayopen [
        guitext "customize scoreboard layout:"
        guistrut 0.5
        guilist [
            guilist [
                guicheckbox "show points" scorepoints
                guicheckbox "show ip addresses" scoreipinfo
                guicheckbox "show status icons" scoreicons
                guicheckbox "show spectators" scorespectators
                guicheckbox "show account handle" scorehandles
            ]
            guistrut 2
            guilist [
                guicheckbox "show client numbers" scoreclientnum
                guicheckbox "show hostmasks" scorehostinfo
                guicheckbox "show ping" scoreping
                guicheckbox "show packet jump" scorepj
                guicheckbox "show bot info" scorebotinfo
            ]
        ]
        guistrut 0.5
        guitext "show frags:"
        guilist [
            guiradio "don't show frags" scorefrags 0
            guistrut 1
            guiradio "frags in deathmatch only" scorefrags 1
            guistrut 1
            guiradio "frags in all modes" scorefrags 2
        ]
        guistrut 0.5
        guitext "show deaths:"
        guilist [
            guiradio "don't show deaths" scoredeaths 0
            guistrut 1
            guiradio "deaths in deathmatch only" scoredeaths 1
            guistrut 1
            guiradio "deaths in all modes" scoredeaths 2
        ]
        guistrut 0.5
        guitext "name highlight colour:"
        guistrut 0.5
        guilist [
            guilist [
                guibackground $scorehilight
                guistrut 6 1
                guistrut 3
            ]
            guistrut 1
            guilist [
                guistrut 1
                guibutton "(click here to change colour)" [ pickcolour scorehilight ] [] "" 0xFFFFFF
                guibutton "(click here to reset default)" [ resetvar scorehilight ] [] "" 0xFFFFFF
            ]
        ]
        guistrut 0.5
        guifont "little" [
            cases $guirollovername "show points" [
                guitext "toggles visibility of total points for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show ip addresses" [
                guitext "toggles visibility of ip addresses for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show status icons" [
                guitext "toggles visibility of status icons (dead, alive, queued) for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show spectators" [
                guitext "toggles visibility of spectating players in the scoreboard" "" 0x22FF22 "" 1200
            ] "show account handle" [
                guitext "toggles visibility of account handles for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show client numbers" [
                guitext "toggles visibility of client numbers (abbreviated as cn) for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show hostmasks" [
                guitext "toggles visibility of hostmasks for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show ping" [
                guitext "toggles visibility of latency (ping) for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show packet jump" [
                guitext "toggles visibility of packet jump measurement for each player in the scoreboard" "" 0x22FF22 "" 1200
            ] "show bot info" [
                guitext "toggles visibility of bot skill levels as well as which player has been assigned to host it locally" "" 0x22FF22 "" 1200
            ]
            cases $guirollovername "don't show frags" [
                guitext "frags will not be visible at all on the scoreboard" "" 0x22FF22 "" 1200
            ] "frags in deathmatch only" [
                guitext "frags will be visible for each player on the scoreboard in deathmatch mode only" "" 0x22FF22 "" 1200
            ] "frags in all modes" [
                guitext "frags will be visible for each player on the scoreboard in all modes" "" 0x22FF22 "" 1200
            ] "don't show deaths" [
                guitext "deaths will not be visible at all on the scoreboard" "" 0x22FF22 "" 1200
            ] "deaths in deathmatch only" [
                guitext "deaths will be visible for each player on the scoreboard in deathmatch mode only" "" 0x22FF22 "" 1200
            ] "deaths in all modes" [
                guitext "deaths will be visible for each player on the scoreboard in all modes" "" 0x22FF22 "" 1200
            ]
        ]
        guistrut 1.5
    ]
    guistatus (format "the scoreboard can be accessed in-game by pressing %1" (dobindsearch showscores) )
]

newgui options_console [
    guiheader "console options"
    guistrut 0.5
    guistayopen [
        guicheckbox "centered console" concenter
        guistrut 0.5
        guilist [
            guilist [
                guilist [
                    guitext "passive lines:"
                    guistrut 1
                    guifield consize 3
                ]
            ]
            guistrut 2
            guilist [
                guilist [
                    guitext "overflow lines:"
                    guistrut 1
                    guifield conoverflow 3
                ]
            ]
        ]
        guistrut 0.5
        guilist [
            guitext "font scale:"
            guistrut 1
            guifield conscale 5
        ]
        guistrut 0.5
        guilist [
            guitext "console opacity:"
            guispring 1
            guilist [
                guistrut 25 1
                conblendstorage = (*f $conblend 100)
                guislider conblendstorage 0 100 [ conblend (divf $conblendstorage 100) ]
            ]
        ]
        guifont "little" [ guitext "^fadefault: 60%" ]
        guistrut 0.5
        guitext "obituaries"
        guilist [
            guilist [
                guiradio2 "off"                                 showobituaries 0
                guiradio2 "only me"                             showobituaries 1
                guiradio2 "me + announcements"                  showobituaries 2
                guiradio2 "announcements; exclude dying bots"   showobituaries 3
                guiradio2 "announcements; exclude bot vs. bot"  showobituaries 4
                guiradio2 "everything"                          showobituaries 5
            ]
        ]
        guistrut 1
        guicheckbox "show obituary distances" showobitdists
        guicheckbox "show obituary health left" showobithpleft
        guistrut 1
        guifont "emphasis" [ guitext "^fachat console" ]
        guibar
        guistrut 0.5
        guilist [
            guistrut 0.5
            guicheckbox "show chat colors" colourchat [ON]
        ]
        guistrut 0.5
        guilist [
            guilist [
                guilist [
                    guitext "passive lines:"
                    guistrut 1
                    guifield chatconsize 3
                ]
            ]
            guistrut 2
            guilist [
                guilist [
                    guitext "overflow lines:"
                    guistrut 1
                    guifield chatconoverflow 3
                ]
            ]
        ]
        guistrut 0.5
        guilist [
            guitext "font scale:"
            guistrut 1
            guifield chatconscale 5
        ]
        guistrut 0.5
        guilist [
            guitext "console opacity:"
            guispring 1
            guilist [
                guistrut 25 1
                chatconblendstorage = (*f $chatconblend 100)
                guislider chatconblendstorage 0 100 [ chatconblend (divf $chatconblendstorage 100) ]
            ]
        ]
        guifont "little" [ guitext "^fadefault: 100%" ]
        guistrut 0.5
        guilist [
            guitext "text blink rate (ms):"
            guispring 1
            guilist [
                guistrut 25 1
                guilistslider textblinking "0 50 100 150 200 250 300 350 400 450 500 550 600 650 700 750 800 850 900 950 1000"
            ]
        ]
        guifont "little" [ guitext "^fadefault: 350ms; 0 = off" ]
        guistrut 0.5
        guilist [
            guitext "text intensity:"
            guispring 1
            guilist [
                guistrut 25 1
                guislider textminintensity
            ]
        ]
        guifont "little" [ guitext "^fadefault: 32" ]
    ]
]

newgui options_menus [
    guiheader "menu options"
    guistrut 0.5
    guistayopen [
        //disable hud borders options for now, not a menu option
        //guilist [
        //    guitext "set borders:"
        //    guistrut 1
        //    guifont "little" [ guitext "^fa(1 = top only, 2 = bottom only, 3 = top & bottom)" ]
        //]
        //guistrut 0.25
        //guilist [
        //    guitext "playing"
        //    guispring 1
        //    guistrut 1
        //    guilist [
        //        guistrut 8 1
        //        guislider playborder 0 3
        //    ]
        //    guistrut 1
        //    guitext "size:"
        //    guistrut 0.5
        //    guilist [
        //        guistrut 22 1
        //        _playbordersize = (*f $playbordersize 20)
        //        guislider _playbordersize 0 20 [ playbordersize (divf $_playbordersize 20) ]
        //    ]
        //    guistrut 1
        //    guibutton "choose colour" [ pickcolour playbordertone ] [] "" 0xFFFFFF
        //]
        //guilist [
        //    guitext "editing"
        //    guispring 1
        //    guistrut 1
        //    guilist [
        //        guistrut 8 1
        //        guislider editborder 0 3
        //    ]
        //    guistrut 1
        //    guitext "size:"
        //    guistrut 0.5
        //    guilist [
        //        guistrut 22 1
        //        _editbordersize = (*f $editbordersize 20)
        //        guislider _editbordersize 0 20 [ editbordersize (divf $_editbordersize 20) ]
        //    ]
        //    guistrut 1
        //    guibutton "choose colour" [ pickcolour editbordertone ] [] "" 0xFFFFFF
        //]
        //guilist [
        //    guitext "spectator"
        //    guispring 1
        //    guistrut 1
        //    guilist [
        //        guistrut 8 1
        //        guislider specborder 0 3
        //    ]
        //    guistrut 1
        //    guitext "size:"
        //    guistrut 0.5
        //    guilist [
        //        guistrut 22 1
        //        _specbordersize = (*f $specbordersize 20)
        //        guislider _specbordersize 0 20 [ specbordersize (divf $_specbordersize 20) ]
        //    ]
        //    guistrut 1
        //    guibutton "choose colour" [ pickcolour specbordertone ] [] "" 0xFFFFFF
        //]
        //guilist [
        //    guitext "waiting"
        //    guispring 1
        //    guistrut 1
        //    guilist [
        //        guistrut 8 1
        //        guislider waitborder 0 3
        //    ]
        //    guistrut 1
        //    guitext "size:"
        //    guistrut 0.5
        //    guilist [
        //        guistrut 22 1
        //        _waitbordersize = (*f $waitbordersize 20)
        //        guislider _waitbordersize 0 20 [ waitbordersize (divf $_waitbordersize 20) ]
        //    ]
        //    guistrut 1
        //    guibutton "choose colour" [ pickcolour waitbordertone ] [] "" 0xFFFFFF
        //]
        //guilist [
        //    guitext "background"
        //    guispring 1
        //    guistrut 1
        //    guilist [
        //        guistrut 8 1
        //        guislider backgroundborder 0 3
        //    ]
        //    guistrut 1
        //    guitext "size:"
        //    guistrut 0.5
        //    guilist [
        //        guistrut 22 1
        //        _backgroundbordersize = (*f $backgroundbordersize 20)
        //        guislider _backgroundbordersize 0 20 [ backgroundbordersize (divf $_backgroundbordersize 20) ]
        //    ]
        //    guistrut 1
        //    guibutton "choose colour" [ pickcolour backgroundbordertone ] [] "" 0xFFFFFF
        //]
        //guifont "little" [ guibutton "(reset all borders to default)" [ resetvar playborder ; resetvar playbordersize ; resetvar playbordertone ; resetvar editborder ; resetvar editbordersize ; resetvar editbordertone ; resetvar specborder ; resetvar specbordersize ; resetvar specbordertone ; resetvar waitborder ; resetvar waitbordersize ; resetvar waitbordertone ; resetvar backgroundborder ; resetvar backgroundbordersize ; resetvar backgroundbordertone ] ]

        guitext "customize colours of gui and skin elements:"
        guistrut 0.5
        guiloopsplit i 3 (getvarinfo -1 1 0 256 128 "gui") [ // all hex colour vars matching gui
            scurvar = (getvarinfo $i 1 0 256 128 "gui")
            s = (stringreplace (stringreplace $scurvar "gui" "") "colour" "")
            guibutton $s [pickcolour @scurvar] [] $modeeditingtex $$scurvar
        ] [guistrut 5]
        guistrut 1.5
        guilist [
            guilist [
                guicheckbox "show menu tooltips" guitooltips
                guicheckbox "show game hints" guistatusline
                guicheckbox "show client GPU info" showloadinggpu
                guicheckbox "show versioning info" showloadingversion
                guicheckbox "show official site link" showloadingurl
            ]
            guistrut 5
            guilist [
                guitext "fill or skin style:"
                guiradio "completely disabled" guiskinned 0
                guiradio "basic rectangular fill" guiskinned 1
                guiradio "skin without border" guiskinned 2
                guiradio "default skin style" guiskinned 3
            ]
        ]
        guistrut 0.5
        guifont "little" [
            cases $guirollovername "show menu tooltips" [
                guitext "tip windows will appear when rolling the mouse over some of the game's menu items" "" 0x22FF22 "" 1200
            ] "show game hints" [
                guitext "a variety of hints relating to everything from gameplay to community will appear below some menus" "" 0x22FF22 "" 1200
            ] "show client GPU info" [
                guitext "your system graphics processing unit (GPU) information will be displayed in the bottom-right corner of the screen in the main menu" "" 0x22FF22 "" 1200
            ] "show versioning info" [
                guitext "red eclipse client version information will be displayed in the bottom-right corner of the screen in the main menu" "" 0x22FF22 "" 1200
            ] "show official site link" [
                guitext "the current official red eclipse website link will be displayed in the bottom-right corner of the screen in the main menu" "" 0x22FF22 "" 1200
            ]
        ]
        guistrut 1.5
    ]
]

newgui options_xhair [
    guiheader "crosshair"
    guistayopen [
        guicenter [
            guibutton "normal" [ xhairprefix = "crosshair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "crosshair") "radioboxon" "") $guiradioboxcolour
            guistrut 1
            guibutton "hit"  [ xhairprefix = "hithair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "hithair") "radioboxon" "") $guiradioboxcolour
            guistrut 1
            guibutton "zoom" [ xhairprefix = "zoomcrosshair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "zoomcrosshair") "radioboxon" "") $guiradioboxcolour
            guistrut 1
            guibutton "team" [ xhairprefix = "teamcrosshair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "teamcrosshair") "radioboxon" "") $guiradioboxcolour
        ]
        xhairtex = (concatword $xhairprefix "tex")
        xhairblend = (concatword $xhairprefix "blend")
        xhairblendstorage = (concatword $xhairprefix "blendstorage")
        xhairsize = (concatword $xhairprefix "size")
        guistrut 0.5
        guilist [
            guistrut $crosshairsboxlen 1
            numcrosshairs = (listlen $crosshairlist)
            crosshairindex = (min (max 0 (- $numcrosshairs $crosshairsboxlen)) $crosshairindex)
            guilist [
                guistrut 35 1
                loop i $crosshairsboxlen [
                    q = (+ $crosshairindex $i)
                    curcrosshair = (at $crosshairlist $q)
                    crosshairname = (concatword "crosshairs/" $curcrosshair)
                    guibody [
                        guilist [
                            guistrut 35 1
                            guistrut 0.3
                            guilist [
                                guiimage $crosshairname [] 1.5 1
                                guistrut 1
                                guilist [
                                    guistrut 1
                                    guibutton (format "%1%2" (? (=s $$xhairtex $crosshairname) "^fy" "^fa") $curcrosshair)
                                ]
                            ]
                            guistrut 0.3
                        ]
                    ] [ ($xhairtex @crosshairname) ]
                ]
            ]
            guislider crosshairindex 0 (max 0 (- $numcrosshairs $crosshairsboxlen)) [] 1 1
        ]
        guistrut 1
        if (&& (!=s $xhairprefix "hithair") (!=s $xhairprefix "teamcrosshair")) [
            guilist [
                guitext "crosshair opacity:"
                guispring 1
                guilist [
                    guistrut 20 1
                    $xhairblendstorage = (*f $$xhairblend 100)
                    guislider $xhairblendstorage 0 100 [ ($xhairblend (divf $$xhairblendstorage 100)) ]
                ]
            ]
            guifont "little" [ guitext (format "^fadefault: %1" (getsvardef $xhairblend 1) ) ]
            guistrut 0.5
            guilist [
                guitext "crosshair size:"
                guistrut 1
                guifield $xhairsize 6
            ]
            guifont "little" [ guitext (format "^fadefault: %1" (getsvardef $xhairsize 1) ) ]
        ] [ guistrut 4.5 ]
    ]
] [
    if (= $guipasses 0) [
        crosshairlist = ""
        crosshairsboxlen = 5
        xhairprefix = "crosshair"
        xhairtex = (concatword $xhairprefix "tex")
        xhairblend = (concatword $xhairprefix "blend")
        xhairblendstorage = (concatword $xhairprefix "blendstorage")
        xhairsize = (concatword $xhairprefix "size")

        loopfiles crosshairs crosshairs png [
            crosshairlist = (concat $crosshairlist $crosshairs)
        ]
        crosshairlist = (sortlist $crosshairlist a b [<s $a $b])
        crosshairindex = (max 0 (listfind mcurcrosshair $crosshairlist [stringcmp (concatword "crosshairs/" $mcurcrosshair) $$xhairtex]))
    ]
]

newgui options_sound [
    guiheader   "sound"
    guilist [
        guilist [
            guistrut 70 1
            guitext "master volume"
            guislider mastervol

            guitext "sound volume"
            guislider soundvol
            guitext "music volume"
            guislider musicvol
            guilist [ guitext "allocated sound channels"; guifont "little" [ guitext "(allocation, NOT the number of speakers)" ] ]
            guislider soundachans
            guitext "sound frequency"
            guilistslider soundfreq "11025 22050 44100"
            guitext "sound buffer length"
            guislider soundbufferlen
        ]
    ]
    guistrut 1
    guilist [
        guilist [
            guitext "in-game music:"
            guitext "edit mode music:"
        ]
        guistrut 2
        guilist [
            guilist [
                guiradio "off" musictype 0
                guistrut 1
                guiradio "mapmusic" musictype 1
                guistrut 1
                guiradio "random" musictype 2
            ]
            guilist [
                guiradio "off" musicedit 0
                guistrut 1
                guiradio "mapmusic" musicedit 1
                guistrut 1
                guiradio "random" musicedit 2
            ]
        ]
    ]
    guistrut 1
    guicheckbox "mumble positional audio" mumble
    guicheckbox "play map-specific sounds" soundenvvol [1.0 0]
    guistrut 1
    guibutton "^fyopen sound debugger" [showgui cursounds]
]

newgui options_autoexec [
    guiheader "autoexec"
    guitext "autoexec.cfg"
    showfileeditor "autoexec.cfg" -80 20
]

bindtypes = [ default spectator editing waiting ]
bindcalls = [ "" spec edit wait ]

bindactions = [
    forward backward left right
    "primary" "secondary" "reload" "jump" "crouch" "special" "universaldelta 1" "universaldelta -1"
    "weapon 1" "weapon 2" "weapon 3" "weapon 4" "weapon 5" "weapon 6" "weapon 7" "weapon 8" "weapon 9" "weapon 10"
    walk use drop affinity
    "saycommand /" "saytextcommand (getsaycolour)" "sayteamcommand (getsaycolour)"
    "showcompass voice" "showcompass team" [if (&& (! (& (mutators) $mutsbitffa)) (!= (gamemode) 6)) [showcompass bot]]
    "showgui help" edittoggle "showgui maps 1" "showgui maps 2" "showservers" "showgui profile 2"
    "showgui team" "showgui clients"  thirdpersonswitch toggleconsole screenshotnohud screenshot
    "spectate 1" addbot delbot
]
bindtitles = [
    forward backward left right
    "primary" "secondary" "reload" "jump" "crouch" "parkour/kick" "next weapon" "previous weapon"
    "weap slot 1" "weap slot 2" "weap slot 3" "weap slot 4" "weap slot 5" "weap slot 6" "weap slot 7" "weap slot 8" "weap slot 9" "weap slot 10"
    walk "use / pick up" "drop weapon" "throw flag/bomb"
    "cmd input" "all chat" "team chat"
    "voice compass" "team compass" "bot compass"
    "help menu" "toggle editing" "maps menu" "show votes menu" "server menu" "loadout menu"
    "team menu" "clients menu" "toggle thirdperson" "toggle console" "screenshot no hud" "screenshot"
    "enter spectator" "add bot" "delete bot"
]

specbindactions = [
    forward backward left right "universaldelta 1" "universaldelta -1"
    specmodeswitch [if (! $isonline) [sv_gamespeed 10000; onrelease [sv_gamespeed 100]]] "spectate 0"
    "saycommand /" "saytextcommand (getsaycolour)" "sayteamcommand (getsaycolour)"
    "showcompass voice" "showcompass team" [if (&& (! (& (mutators) $mutsbitffa)) (!= (gamemode) 6)) [showcompass bot]]
    "showgui help" edittoggle "showgui maps 1" "showgui maps 2" "showservers" "showgui profile 2"
    "showgui team" "setpriv 1"  thirdpersonswitch toggleconsole screenshot
    "spectate 1" addbot delbot
]
specbindtitles = [
    forward backward left right "watch next player" "watch previous player"
    "toggle TV mode" "fast forward (offline)" "exit spectator"
    "cmd input" "all chat" "team chat"
    "voice compass" "team compass" "bot compass"
    "help menu" "toggle editing" "maps menu" "show votes menu" "server menu" "loadout menu"
    "team menu" "claim privileges" "toggle thirdperson" "toggle console" "screenshot"
    "enter spectator" "add bot" "delete bot"
]

waitbindactions = [
    forward backward left right "universaldelta 1" "universaldelta -1" "spectate 1"
    waitmodeswitch
    "saycommand /" "saytextcommand (getsaycolour)" "sayteamcommand (getsaycolour)"
    "showgui help" edittoggle "showgui maps 1" "showgui maps 2" "showservers" "showgui profile 2"
    "showgui team" "setpriv 1"  thirdpersonswitch toggleconsole screenshot
    "spectate 1" addbot delbot
    "showcompass voice" "showcompass team" [if (&& (! (& (mutators) $mutsbitffa)) (!= (gamemode) 6)) [showcompass bot]]
]
waitbindtitles = [
    forward backward left right "scroll up" "scroll down" "enter spectator"
    "switch wait TV mode"
    "cmd input" "all chat" "team chat"
    "voice compass" "team compass" "bot compass"
    "help menu" "toggle editing" "maps menu" "show votes menu" "server menu" "loadout menu"
    "team menu" "claim privileges" "toggle thirdperson" "toggle console" "screenshot"
    "enter spectator" "add bot" "delete bot"
]

editbindactions = [
    "showtexgui" edittoggle "showgui edit" "remip" "fullbright 0; patchlight"
    "fullbright 0; quicklight" "fullbright 0; calclight 1" savemap "changeoutline 1"
    [showcompass editing] [showgui materials] [if $blendpaintmode paintblendmap editdrag]
    [if $blendpaintmode rotateblendbrush editextend] selcorners  "universaldelta 1" "universaldelta -1"
    cancelsel entcancel editdel editcopy editpaste editcut editflip
    gettex entlink selentedit "entselect insel"
    "undo; passthroughsel 0" redo getmap sendmap
    "domodifier 1" "domodifier 2" "domodifier 3" "domodifier 4" "domodifier 6" "domodifier 9"
    "domodifier 10; onrelease entautoview" togglegrid
    [fullbright (= $fullbright 0); if (= $fullbright 0) [echo fullbright OFF] [ echo fullbright ON]]
    [showmat (= $showmat 0); if (= $showmat 0) [echo showmat OFF] [ echo showmat ON]]
    [outline (= $outline 0); if (= $outline 0) [echo outline OFF] [ echo outline ON]]
    [allfaces (= $allfaces 0); if (= $allfaces 0) [echo allfaces OFF] [ echo allfaces ON]]
    [hmapedit 0;
    blendpaintmode (? (= $blendpaintmode (getvarmax blendpaintmode)) 0 (+ $blendpaintmode 1))
    echo (concatword "^fgblend mode:^fw " (at $paintmodes $blendpaintmode) " (^fc" $blendpaintmode "^fw)")]
    "hmapedit (! $hmapedit); blendpaintmode 0"
    "hmapedit 0; blendpaintmode 0"
]
editbindtitles = [
    "texture menu"  "toggle editing" "editing menu" "remip" "patch lights"
    "quick calclight" "full calclight" "save map" "change outline"
    "editing compass" "materials menu" "select faces" "extend selection" "select corners" "pull cubes" "push cubes"
    "deselect all" "deselect ents" "delete ents, geometry" "copy selection" "paste" "cut/paste on release" "flip geometry"
    "grab texture" "link entities" "edit selected ent" "pick ents in selection"
    undo redo "get map from server" "send map to server"
    "change grid size" "push/pull cube face" "push/pull cube corner" "rotate" "cycle textures" "cycle heightmap brush" "view selected ents"
    "cycle paste grid"  "toggle full bright" "toggle materials" "toggle outline" "toggle all faces"
    "toggle blendmap mode" "toggle heightmap" "quit blend/heightmap"
]

curbindtype = 0
curbindshow = 1

newgui resetcontrols [
    guiheader "reset controls"
    guifont "emphasis" [ guicenter [ guitext "RESTORE DEFAULT CONTROLS" ] ]
    guistrut 0.5
    guicenter [ guitext "You are about to restore the Red Eclipse default keyboard binds." ]
    guistrut 0.25
    guifont "little" [
        guicenter [ guitext "Keys that have not been bound to a function by default will remain unchanged." ]
        guicenter [ guitext "If you wish to restore only a single bind, you must close Red Eclipse, open the user" ]
    guicenter [ guitext "config file in the home folder (config.cfg), delete the appropriate entry, then save." ]
    ]
    guistrut 0.5
    guicenter [ guitext "Are you sure you wish to continue?" ]
    guistrut 0.5
    guicenter [ guistayopen [
        guibutton "^fgYES, continue" [exec config/setup.cfg; cleargui 1]
        guispring 1
        guibutton "^foNO, go back" [cleargui 1]
    ] ]
]

newgui options_controls [
    guiheader  "keys"
    guicenter [
        // guilist [ guistrut 28 ]
        guilist [
            guistrut 0.5
            guitext "click a key field and press the desired keys to bind" 
            guitext "    then press Esc to deselect the input field"
            guistrut 1
            guilist [
                guitext "state:"
                guistrut 1
                loop i 4 [ guiradio (at $bindtypes $i) curbindtype $i; guistrut 2 ]
                //guicheckbox "show default bind if not found" curbindshow
            ]
            guistrut 1
            curbindsign = (at $bindcalls $curbindtype)
            curbindcall = (concatword $curbindsign bind)
            curbindacts = (concatword $curbindsign bindactions)
            curbindtits = (concatword $curbindsign bindtitles)
            curbindsrch = (concatword search $curbindsign binds)
            //guilooplistsplit n 2 $[@curbindacts] [
            guiloopscrollbar gli (listlen $[@curbindacts]) 10 50 [
                n = (at $[@curbindacts] $gli) 
                guilist [
                    guitext (concatword (at $[@curbindtits] $gli) " ") 
                    [newbinds@curbindsign@gli] = ([@curbindsrch] $n 0 "" "" " " " " @curbindshow)
                    guispring
                    guikeyfield [newbinds@curbindsign@gli] -24 [
                        oldbinds = ([@@curbindsrch] @n 0 "" "" " " " "  @@curbindshow)
                        looplist j $oldbinds [echo @@curbindcall " " $j; @@curbindcall $j ""]
                        looplist j $[newbinds@@curbindsign@@gli] [echo @@curbindcall $j " " @@n; @@curbindcall $j [@@@n]]
                    ]
                ]
            ]// [ guistrut 2 ]
            guistrut 0.5
            guibutton "^frrestore all default key binds" [showgui resetcontrols]
        ]
    ]

    guitab  "mouse"
    guicenter [
        guilist [
            guistrut 3
            guistrut 50 1
            guitext "mouse overall sensitivity"
            guislider sensitivity 1 100
            guistrut 1
            guitext "mouse yaw sensitivity"
            guislider yawsensitivity 1 100
            guistrut 1
            guitext "mouse pitch sensitivity"
            guislider pitchsensitivity 1 100
            guistrut 1
            guicheckbox "invert y-axis" mouseinvert
            guistrut 1.5
            guitext "Tip: You may want to adjust your system settings"
            guitext "      for accelerated mouse movement."
        ]
    ]

    guitab "advanced"
    guivisibletab [ guistayopen [
        guistrut 1
    	guitext "Use below field to select some keys or mouse buttons,"
    	guitext "then press Esc to deselect the key field."
    	guikeyfield curkey -50 [] -1 0 "" "" 1
    	guitext "Click a bind to edit it, right-click to clear a bind action."
    	// use the latest key pressed only
    	if (> (listlen $curkey) 1) [curkey = (at $curkey (- (listlen $curkey) 1))]
    	// guitext [binds for the latest key pressed: @curkey]
    	guistrut 1
    	guistrut 50 1
    	curbind = (getbind $curkey)
    	if $curkey [
    	    if $curbind [
    	        guibox 0x333333 0xffffff [
    	            guibutton [regular bind for @curkey:] [saycommand /bind @curkey "["@curbind"]"] [saycommand /bind @curkey "[]"]
    	            guitext $curbind "" -1 -1 800
    	        ]
    	        // look up universal delta
    	        if (=s "universaldelta" (at $curbind 0)) [
    	            guistrut 0.5
    	            guibox 0x333333 0xffffff [
    	                guitext "this implies the following scroll actions:"
    	                looplist i [game spec wait edit dead] [
    	                    d = (format "delta_%1_0" $i)
    	                    if (getalias $d) [
    	                        guistrut 0.5
    	                        guibutton [@d =] [saycommand /@d = "["$@d"]"]
    	                        guitext $$d "" -1 -1 1200
    	                    ]
    	                ]
    	                guitext "and more actions with modifier keys"
    	            ]
    	        ]
    	        // look up modifiers for universal delta
    	        if (=s "domodifier" (at $curbind 0)) [
    	            guistrut 0.5
    	            guibox 0x333333 0xffffff [
    	                guitext "this implies the following scroll actions:"
    	                looplist i [game spec wait edit dead] [
    	                    d = (format "delta_%1_%2" $i (at $curbind 1))
    	                    if (getalias $d) [
    	                        guibutton [@d =] [saycommand /@d = "["$@d"]"]
    	                        guitext $$d "" -1 -1 1200
    	                    ]
    	                ]
    	            ]
    	        ]
    	    ] [
    	        guibutton [no regular bind on @curkey. Click here to add one.] [saycommand /bind @curkey "["]
    	    ] 
    	    guistrut 1
    	    // same thing for other bind types, mainly editbinds
    	    looplist i [edit spec wait] [
    	        [curbind@i] = ([get@[i]bind] $curkey) 
    	        if (!=s $curbind $[curbind@i]) [
    	            guibox 0x333333 0xffffff [
    	                guibutton [@i bind for @curkey:] [saycommand /@[i]bind @curkey "["@[curbind@i]"]"] [saycommand /@[i]bind @curkey "[]"]
    	                guitext $[curbind@i] "" -1 -1 1200
    	            ]
    	            // look up modifiers for universal delta
    	            if (=s "domodifier" (at $[curbind@i] 0)) [
    	                guistrut 0.5
    	                guibox 0x333333 0xffffff [
    	                    guitext "this implies the following scroll actions:"
    	                    looplist j [game spec wait edit dead] [
    	                        d = (format "delta_%1_%2" $j (at $[curbind@i] 1))
    	                        if (getalias $d) [
    	                            guibutton [@d =] [saycommand /@d = "["$@d"]"]
    	                            guitext $$d "" -1 -1 1200
    	                        ]
    	                    ]
    	                ]
    	            ]
    	        ] [
    	            guibutton [no @i bind on @curkey. Click here to add one.] [saycommand /@[i]bind @curkey "["]
    	        ] 
    	        guistrut 1
    	    ] 
    	] 
    ] ]
] [
    if (= $guipasses 0) [ curbindtype = 0; curkey = "" ]
]
